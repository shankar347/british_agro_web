"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/(pages)/bunker-management/page",{

/***/ "(app-pages-browser)/./app/(pages)/bunker-management/page.jsx":
/*!************************************************!*\
  !*** ./app/(pages)/bunker-management/page.jsx ***!
  \************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ BunkerManagement)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_navigation__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/navigation */ \"(app-pages-browser)/./node_modules/next/dist/api/navigation.js\");\n/* harmony import */ var _components_AppLayout__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../components/AppLayout */ \"(app-pages-browser)/./app/components/AppLayout.jsx\");\n/* harmony import */ var _components_common_Toaster__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../components/common/Toaster */ \"(app-pages-browser)/./app/components/common/Toaster.jsx\");\n/* harmony import */ var _styles_pages_unified_platform_css__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../styles/pages/unified-platform.css */ \"(app-pages-browser)/./app/styles/pages/unified-platform.css\");\n/* harmony import */ var _mui_icons_material_Save__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @mui/icons-material/Save */ \"(app-pages-browser)/./node_modules/@mui/icons-material/esm/Save.js\");\n/* harmony import */ var _mui_icons_material_ArrowBack__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/icons-material/ArrowBack */ \"(app-pages-browser)/./node_modules/@mui/icons-material/esm/ArrowBack.js\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$(), _s1 = $RefreshSig$(), _s2 = $RefreshSig$();\n\n\n\n\n\n\n\n\nconst MATERIAL_TYPES = {\n    'BAGASSE': 'BAGASSE',\n    'WHEAT STRAW': 'WHEAT',\n    'PADDY STRAW': 'PADDY'\n};\nconst MATERIAL_DISPLAY_NAMES = {\n    'BAGASSE': 'Bagasse',\n    'WHEAT': 'Wheat Straw',\n    'PADDY': 'Paddy Straw'\n};\nconst API_BASE_URL = \"http://192.168.1.148:8000\";\nconst API_ENDPOINT = \"\".concat(API_BASE_URL, \"/bunker-management\");\nconst API_FETCH_ENDPOINT = \"\".concat(API_BASE_URL, \"/bunker-management\");\nconst BATCH_FETCH_ENDPOINT = \"\".concat(API_BASE_URL, \"/batches\");\nconst STAGE_NAMES = [\n    \"Bunker Process 1\",\n    \" Rest\",\n    \"Bunker Process 2\",\n    \"Bunker Process 2 Rest\",\n    \"Bunker Process 3\",\n    \"Bunker Process 3 Rest\"\n];\n// Create a combined entry that can handle multiple materials\nconst createCombinedSubstage = (name)=>({\n        name: name,\n        materials: {\n            'BAGASSE': {\n                startDate: '',\n                startTime: '',\n                endDate: '',\n                endTime: '',\n                totalHours: '',\n                moisture: '',\n                temperature: '',\n                remarks: '',\n                recordId: null\n            },\n            'WHEAT': {\n                startDate: '',\n                startTime: '',\n                endDate: '',\n                endTime: '',\n                totalHours: '',\n                moisture: '',\n                temperature: '',\n                remarks: '',\n                recordId: null\n            },\n            'PADDY': {\n                startDate: '',\n                startTime: '',\n                endDate: '',\n                endTime: '',\n                totalHours: '',\n                moisture: '',\n                temperature: '',\n                remarks: '',\n                recordId: null\n            }\n        }\n    });\nconst createEmptySubstage = function(name) {\n    let includeMoisture = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : true;\n    return {\n        name: name,\n        startDate: '',\n        startTime: '',\n        endDate: '',\n        endTime: '',\n        totalHours: '',\n        moisture: '',\n        temperature: '',\n        remarks: ''\n    };\n};\nconst createEmptyBatch = function(batchNumber) {\n    let materials = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : [], batchId = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : null;\n    const batch = {\n        id: batchId || Date.now(),\n        batchNumber: batchNumber,\n        materials: materials,\n        batchData: null,\n        existingRecords: {},\n        combinedData: {\n            substages: STAGE_NAMES.map((name)=>createCombinedSubstage(name))\n        }\n    };\n    return batch;\n};\nconst parseDateTime = (datetime)=>{\n    if (!datetime) return {\n        date: '',\n        time: ''\n    };\n    try {\n        const date = new Date(datetime);\n        if (isNaN(date.getTime())) return {\n            date: '',\n            time: ''\n        };\n        const year = date.getFullYear();\n        const month = String(date.getMonth() + 1).padStart(2, '0');\n        const day = String(date.getDate()).padStart(2, '0');\n        const hours = String(date.getHours()).padStart(2, '0');\n        const minutes = String(date.getMinutes()).padStart(2, '0');\n        return {\n            date: \"\".concat(year, \"-\").concat(month, \"-\").concat(day),\n            time: \"\".concat(hours, \":\").concat(minutes)\n        };\n    } catch (error) {\n        console.error('Error parsing datetime:', error);\n        return {\n            date: '',\n            time: ''\n        };\n    }\n};\nconst calculateHours = (startDateTime, endDateTime)=>{\n    if (!startDateTime || !endDateTime) return '';\n    try {\n        const start = new Date(startDateTime);\n        const end = new Date(endDateTime);\n        if (isNaN(start.getTime()) || isNaN(end.getTime())) return '';\n        const diffHours = (end - start) / (1000 * 60 * 60);\n        return diffHours.toFixed(1);\n    } catch (error) {\n        return '';\n    }\n};\nconst fetchBatchData = async (batchId)=>{\n    try {\n        console.log(\"\\uD83D\\uDCCA Fetching bunker data for batch ID: \".concat(batchId));\n        const response = await fetch(\"\".concat(API_FETCH_ENDPOINT, \"/\").concat(batchId));\n        if (!response.ok) {\n            if (response.status === 404) {\n                console.log('ðŸ“­ No existing bunker data found for batch');\n                return {\n                    success: true,\n                    data: null\n                };\n            }\n            throw new Error(\"Failed to fetch bunker data: \".concat(response.status));\n        }\n        const responseData = await response.json();\n        console.log('ðŸ“¦ Fetched bunker data:', responseData);\n        if (responseData.success && responseData.data && responseData.data.items) {\n            return {\n                success: true,\n                data: responseData.data.items\n            };\n        }\n        if (responseData.data && Array.isArray(responseData.data)) {\n            return {\n                success: true,\n                data: responseData.data\n            };\n        }\n        if (Array.isArray(responseData)) {\n            return {\n                success: true,\n                data: responseData\n            };\n        }\n        if (responseData.id || responseData.batch_id) {\n            return {\n                success: true,\n                data: [\n                    responseData\n                ]\n            };\n        }\n        return {\n            success: true,\n            data: null\n        };\n    } catch (error) {\n        console.error('âŒ Error fetching bunker data:', error);\n        return {\n            success: false,\n            error: error.message\n        };\n    }\n};\nconst fetchBatchDetails = async (batchId)=>{\n    try {\n        const response = await fetch(\"\".concat(BATCH_FETCH_ENDPOINT, \"/\").concat(batchId));\n        if (!response.ok) {\n            throw new Error(\"Failed to fetch batch details: \".concat(response.status));\n        }\n        const data = await response.json();\n        return {\n            success: true,\n            data\n        };\n    } catch (error) {\n        console.error('âŒ Error fetching batch details:', error);\n        return {\n            success: false,\n            error: error.message\n        };\n    }\n};\nconst combineDateTime = (date, time)=>{\n    if (!date || !time) return null;\n    try {\n        const dateTimeStr = \"\".concat(date, \"T\").concat(time, \":00\");\n        const datetime = new Date(dateTimeStr);\n        if (isNaN(datetime.getTime())) return null;\n        return datetime.toISOString();\n    } catch (error) {\n        console.error('Error combining datetime:', error);\n        return null;\n    }\n};\nconst hasSubstageData = (substageData)=>{\n    return substageData.startDate || substageData.startTime || substageData.endDate || substageData.endTime || substageData.moisture || substageData.temperature || substageData.remarks;\n};\nconst validateStageSequencing = (combinedData, materialType, toast)=>{\n    const substages = combinedData.substages;\n    for(let i = 0; i < substages.length - 1; i++){\n        const currentStage = substages[i].materials[materialType];\n        const nextStage = substages[i + 1].materials[materialType];\n        if (!currentStage.endDate || !currentStage.endTime || !nextStage.startDate || !nextStage.startTime) {\n            continue;\n        }\n        const currentEnd = combineDateTime(currentStage.endDate, currentStage.endTime);\n        const nextStart = combineDateTime(nextStage.startDate, nextStage.startTime);\n        if (currentEnd && nextStart) {\n            if (new Date(currentEnd) > new Date(nextStart)) {\n                toast.error(\"\".concat(MATERIAL_DISPLAY_NAMES[materialType], \": \").concat(substages[i + 1].name, \" must start after \").concat(substages[i].name, \" ends\"));\n                return false;\n            }\n        }\n    }\n    return true;\n};\nconst hasCompleteMaterialData = (combinedData, materialType)=>{\n    const substages = combinedData.substages;\n    // Check if any data exists for this material\n    const hasAnyData = substages.some((substage)=>{\n        const materialData = substage.materials[materialType];\n        return materialData.startDate || materialData.startTime || materialData.endDate || materialData.endTime || materialData.moisture || materialData.temperature || materialData.remarks;\n    });\n    if (!hasAnyData) {\n        console.log(\"\\uD83D\\uDCDD \".concat(MATERIAL_DISPLAY_NAMES[materialType], \": No data entered\"));\n        return false;\n    }\n    // Check each substage for completeness\n    for (const substage of substages){\n        const materialData = substage.materials[materialType];\n        if (materialData.startDate && !materialData.startTime) {\n            console.log(\"\\uD83D\\uDCDD \".concat(MATERIAL_DISPLAY_NAMES[materialType], \": Incomplete start data in \").concat(substage.name, \" (date without time)\"));\n            return false;\n        }\n        if (materialData.startTime && !materialData.startDate) {\n            console.log(\"\\uD83D\\uDCDD \".concat(MATERIAL_DISPLAY_NAMES[materialType], \": Incomplete start data in \").concat(substage.name, \" (time without date)\"));\n            return false;\n        }\n        if (materialData.endDate && !materialData.endTime) {\n            console.log(\"\\uD83D\\uDCDD \".concat(MATERIAL_DISPLAY_NAMES[materialType], \": Incomplete end data in \").concat(substage.name, \" (date without time)\"));\n            return false;\n        }\n        if (materialData.endTime && !materialData.endDate) {\n            console.log(\"\\uD83D\\uDCDD \".concat(MATERIAL_DISPLAY_NAMES[materialType], \": Incomplete end data in \").concat(substage.name, \" (time without date)\"));\n            return false;\n        }\n    }\n    console.log(\"âœ… \".concat(MATERIAL_DISPLAY_NAMES[materialType], \": Has valid data to save\"));\n    return true;\n};\nconst convertToApiPayload = (batch, materialType, isCompleted)=>{\n    var _substages_, _substages_1, _substages_2, _substages_3, _substages_4, _substages_5;\n    const substages = batch.combinedData.substages;\n    const materialDisplayName = MATERIAL_DISPLAY_NAMES[materialType];\n    const bunker1 = ((_substages_ = substages[0]) === null || _substages_ === void 0 ? void 0 : _substages_.materials[materialType]) || createEmptySubstage(\"Bunker Process 1\");\n    const bunker1Rest = ((_substages_1 = substages[1]) === null || _substages_1 === void 0 ? void 0 : _substages_1.materials[materialType]) || createEmptySubstage(\"Bunker Process 1 Rest\");\n    const bunker2 = ((_substages_2 = substages[2]) === null || _substages_2 === void 0 ? void 0 : _substages_2.materials[materialType]) || createEmptySubstage(\"Bunker Process 2\");\n    const bunker2Rest = ((_substages_3 = substages[3]) === null || _substages_3 === void 0 ? void 0 : _substages_3.materials[materialType]) || createEmptySubstage(\"Bunker Process 2 Rest\");\n    const bunker3 = ((_substages_4 = substages[4]) === null || _substages_4 === void 0 ? void 0 : _substages_4.materials[materialType]) || createEmptySubstage(\"Bunker Process 3\");\n    const bunker3Rest = ((_substages_5 = substages[5]) === null || _substages_5 === void 0 ? void 0 : _substages_5.materials[materialType]) || createEmptySubstage(\"Bunker Process 3 Rest\");\n    // Helper function to format datetime without milliseconds and timezone\n    const formatDateTime = (dateTimeStr)=>{\n        if (!dateTimeStr) return null;\n        try {\n            const date = new Date(dateTimeStr);\n            if (isNaN(date.getTime())) return null;\n            const year = date.getFullYear();\n            const month = String(date.getMonth() + 1).padStart(2, '0');\n            const day = String(date.getDate()).padStart(2, '0');\n            const hours = String(date.getHours()).padStart(2, '0');\n            const minutes = String(date.getMinutes()).padStart(2, '0');\n            const seconds = String(date.getSeconds()).padStart(2, '0');\n            return \"\".concat(year, \"-\").concat(month, \"-\").concat(day, \"T\").concat(hours, \":\").concat(minutes, \":\").concat(seconds);\n        } catch (error) {\n            console.error('Error formatting datetime:', error);\n            return null;\n        }\n    };\n    // Only combine dates if both date and time exist\n    const bunker1_start = bunker1.startDate && bunker1.startTime ? combineDateTime(bunker1.startDate, bunker1.startTime) : null;\n    const bunker1_end = bunker1.endDate && bunker1.endTime ? combineDateTime(bunker1.endDate, bunker1.endTime) : null;\n    const bunker1_rest_start = bunker1Rest.startDate && bunker1Rest.startTime ? combineDateTime(bunker1Rest.startDate, bunker1Rest.startTime) : null;\n    const bunker1_rest_end = bunker1Rest.endDate && bunker1Rest.endTime ? combineDateTime(bunker1Rest.endDate, bunker1Rest.endTime) : null;\n    const bunker2_start = bunker2.startDate && bunker2.startTime ? combineDateTime(bunker2.startDate, bunker2.startTime) : null;\n    const bunker2_end = bunker2.endDate && bunker2.endTime ? combineDateTime(bunker2.endDate, bunker2.endTime) : null;\n    const bunker2_rest_start = bunker2Rest.startDate && bunker2Rest.startTime ? combineDateTime(bunker2Rest.startDate, bunker2Rest.startTime) : null;\n    const bunker2_rest_end = bunker2Rest.endDate && bunker2Rest.endTime ? combineDateTime(bunker2Rest.endDate, bunker2Rest.endTime) : null;\n    const bunker3_start = bunker3.startDate && bunker3.startTime ? combineDateTime(bunker3.startDate, bunker3.startTime) : null;\n    const bunker3_end = bunker3.endDate && bunker3.endTime ? combineDateTime(bunker3.endDate, bunker3.endTime) : null;\n    const bunker3_rest_start = bunker3Rest.startDate && bunker3Rest.startTime ? combineDateTime(bunker3Rest.startDate, bunker3Rest.startTime) : null;\n    const bunker3_rest_end = bunker3Rest.endDate && bunker3Rest.endTime ? combineDateTime(bunker3Rest.endDate, bunker3Rest.endTime) : null;\n    // Determine overall start_time (earliest start across all stages)\n    const allStarts = [\n        bunker1_start,\n        bunker1_rest_start,\n        bunker2_start,\n        bunker2_rest_start,\n        bunker3_start,\n        bunker3_rest_start\n    ].filter((start)=>start !== null);\n    const overall_start_time = allStarts.length > 0 ? formatDateTime(new Date(Math.min(...allStarts.map((d)=>new Date(d).getTime())))) : null;\n    // Format all datetime fields\n    const payload = {\n        batch_id: batch.id,\n        straw_type: materialType,\n        start_time: overall_start_time,\n        iscompleted: isCompleted,\n        bunker_process1: {\n            start_time: formatDateTime(bunker1_start),\n            end_time: formatDateTime(bunker1_end),\n            moisture: bunker1.moisture ? parseInt(bunker1.moisture) : null,\n            temperature: bunker1.temperature ? parseInt(bunker1.temperature) : null\n        },\n        bunker_process1_rest: {\n            start_time: formatDateTime(bunker1_rest_start),\n            end_time: formatDateTime(bunker1_rest_end),\n            moisture: bunker1Rest.moisture ? parseInt(bunker1Rest.moisture) : null,\n            temperature: bunker1Rest.temperature ? parseInt(bunker1Rest.temperature) : null\n        },\n        bunker_process2: {\n            start_time: formatDateTime(bunker2_start),\n            end_time: formatDateTime(bunker2_end),\n            moisture: bunker2.moisture ? parseInt(bunker2.moisture) : null,\n            temperature: bunker2.temperature ? parseInt(bunker2.temperature) : null\n        },\n        bunker_process2_rest: {\n            start_time: formatDateTime(bunker2_rest_start),\n            end_time: formatDateTime(bunker2_rest_end),\n            moisture: bunker2Rest.moisture ? parseInt(bunker2Rest.moisture) : null,\n            temperature: bunker2Rest.temperature ? parseInt(bunker2Rest.temperature) : null\n        },\n        bunker_process3: {\n            start_time: formatDateTime(bunker3_start),\n            end_time: formatDateTime(bunker3_end),\n            moisture: bunker3.moisture ? parseInt(bunker3.moisture) : null,\n            temperature: bunker3.temperature ? parseInt(bunker3.temperature) : null\n        },\n        bunker_process3_rest: {\n            start_time: formatDateTime(bunker3_rest_start),\n            end_time: formatDateTime(bunker3_rest_end),\n            moisture: bunker3Rest.moisture ? parseInt(bunker3Rest.moisture) : null,\n            temperature: bunker3Rest.temperature ? parseInt(bunker3Rest.temperature) : null\n        }\n    };\n    // Remove null values\n    Object.keys(payload).forEach((key)=>{\n        if (payload[key] === null) {\n            delete payload[key];\n        } else if (typeof payload[key] === 'object' && payload[key] !== null && key !== 'batch_id' && key !== 'straw_type' && key !== 'iscompleted') {\n            Object.keys(payload[key]).forEach((subKey)=>{\n                if (payload[key][subKey] === null || payload[key][subKey] === undefined) {\n                    delete payload[key][subKey];\n                }\n            });\n            if (Object.keys(payload[key]).length === 0) {\n                delete payload[key];\n            }\n        }\n    });\n    console.log(\"\\uD83D\\uDCE6 Generated payload for \".concat(materialDisplayName, \":\"), payload);\n    return payload;\n};\nconst convertApiResponseToUI = (apiData, batch)=>{\n    if (!apiData || !Array.isArray(apiData)) {\n        console.log('âŒ No valid API data array to convert:', apiData);\n        return batch;\n    }\n    console.log('ðŸ”„ Converting API data to UI. Found items:', apiData.length);\n    apiData.forEach((materialData)=>{\n        if (!materialData.straw_type) return;\n        const materialType = materialData.straw_type;\n        console.log(\"âœ… Found data for \".concat(MATERIAL_DISPLAY_NAMES[materialType], \":\"), materialData);\n        const substageMappings = [\n            {\n                index: 0,\n                field: 'bunker_process1'\n            },\n            {\n                index: 1,\n                field: 'bunker_process1_rest'\n            },\n            {\n                index: 2,\n                field: 'bunker_process2'\n            },\n            {\n                index: 3,\n                field: 'bunker_process2_rest'\n            },\n            {\n                index: 4,\n                field: 'bunker_process3'\n            },\n            {\n                index: 5,\n                field: 'bunker_process3_rest'\n            }\n        ];\n        substageMappings.forEach((param)=>{\n            let { index, field } = param;\n            const stageData = materialData[field];\n            if (stageData) {\n                const targetSubstage = batch.combinedData.substages[index].materials[materialType];\n                if (stageData.id) {\n                    targetSubstage.recordId = stageData.id;\n                }\n                if (stageData.start_time) {\n                    const { date, time } = parseDateTime(stageData.start_time);\n                    targetSubstage.startDate = date;\n                    targetSubstage.startTime = time;\n                }\n                if (stageData.end_time) {\n                    const { date, time } = parseDateTime(stageData.end_time);\n                    targetSubstage.endDate = date;\n                    targetSubstage.endTime = time;\n                }\n                if (stageData.duration_hours !== undefined && stageData.duration_hours !== null) {\n                    targetSubstage.totalHours = stageData.duration_hours.toString();\n                }\n                if (stageData.moisture !== undefined && stageData.moisture !== null) {\n                    targetSubstage.moisture = stageData.moisture.toString();\n                }\n                if (stageData.temperature !== undefined && stageData.temperature !== null) {\n                    targetSubstage.temperature = stageData.temperature.toString();\n                }\n                if (stageData.remarks) {\n                    targetSubstage.remarks = stageData.remarks;\n                }\n            }\n        });\n    });\n    console.log('âœ… Finished converting API data to UI');\n    return batch;\n};\nconst sendToApi = async (payload, materialType, displayName)=>{\n    try {\n        const response = await fetch(API_ENDPOINT, {\n            method: 'PUT',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(payload)\n        });\n        console.log(\"\\uD83D\\uDCE5 RESPONSE for \".concat(displayName, \": Status \").concat(response.status));\n        if (!response.ok) {\n            const errorData = await response.json().catch(()=>({\n                    detail: 'Unknown error'\n                }));\n            console.error('âŒ API Error Response:', errorData);\n            let errorMessage = \"API error: \".concat(response.status);\n            if (errorData.detail) {\n                if (typeof errorData.detail === 'string') {\n                    errorMessage = errorData.detail;\n                } else if (Array.isArray(errorData.detail)) {\n                    errorMessage = errorData.detail.map((err)=>err.msg).join(', ');\n                } else if (typeof errorData.detail === 'object') {\n                    errorMessage = JSON.stringify(errorData.detail);\n                }\n            }\n            throw new Error(errorMessage);\n        }\n        const result = await response.json();\n        console.log(\"âœ… SUCCESS for \".concat(displayName, \":\"), result);\n        return {\n            success: true,\n            data: result,\n            materialType,\n            displayName\n        };\n    } catch (error) {\n        console.error(\"âŒ ERROR sending \".concat(displayName, \" data:\"), error);\n        return {\n            success: false,\n            error: error.message,\n            materialType,\n            displayName\n        };\n    }\n};\nconst CombinedMaterialTable = /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1___default().memo(_s((param)=>{\n    let { batch, onUpdate, readOnly = false } = param;\n    _s();\n    const toast = (0,_components_common_Toaster__WEBPACK_IMPORTED_MODULE_4__.useToast)();\n    const materials = batch.materials;\n    // Get material types that are present in the batch\n    const presentMaterialTypes = materials.map((m)=>MATERIAL_TYPES[m]).filter(Boolean);\n    // Get display names for the header\n    const getHeaderMaterials = ()=>{\n        return presentMaterialTypes.map((type)=>MATERIAL_DISPLAY_NAMES[type]);\n    };\n    const validateDateRange = (substage, materialType, field, newValue)=>{\n        const materialData = substage.materials[materialType];\n        if (field === 'startDate' || field === 'startTime') {\n            if (materialData.endDate && materialData.endTime) {\n                const newStartDateTime = field === 'startDate' ? combineDateTime(newValue, materialData.startTime) : combineDateTime(materialData.startDate, newValue);\n                const endDateTime = combineDateTime(materialData.endDate, materialData.endTime);\n                if (newStartDateTime && endDateTime && new Date(newStartDateTime) > new Date(endDateTime)) {\n                    toast.error(\"\".concat(MATERIAL_DISPLAY_NAMES[materialType], \" - \").concat(substage.name, \": Start date/time cannot be after end date/time\"));\n                    return false;\n                }\n            }\n        } else if (field === 'endDate' || field === 'endTime') {\n            if (materialData.startDate && materialData.startTime) {\n                const startDateTime = combineDateTime(materialData.startDate, materialData.startTime);\n                const newEndDateTime = field === 'endDate' ? combineDateTime(newValue, materialData.endTime) : combineDateTime(materialData.endDate, newValue);\n                if (startDateTime && newEndDateTime && new Date(startDateTime) > new Date(newEndDateTime)) {\n                    toast.error(\"\".concat(MATERIAL_DISPLAY_NAMES[materialType], \" - \").concat(substage.name, \": End date/time cannot be before start date/time\"));\n                    return false;\n                }\n            }\n        }\n        return true;\n    };\n    const validateStageSequence = (substageIndex, materialType, field, value, updatedBatch)=>{\n        const substage = updatedBatch.combinedData.substages[substageIndex];\n        const tempMaterialData = {\n            ...substage.materials[materialType],\n            [field]: value\n        };\n        if (substageIndex > 0) {\n            const prevStage = updatedBatch.combinedData.substages[substageIndex - 1].materials[materialType];\n            if (prevStage.endDate && prevStage.endTime && tempMaterialData.startDate && tempMaterialData.startTime) {\n                const prevEnd = combineDateTime(prevStage.endDate, prevStage.endTime);\n                const currentStart = combineDateTime(tempMaterialData.startDate, tempMaterialData.startTime);\n                if (prevEnd && currentStart && new Date(prevEnd) > new Date(currentStart)) {\n                    toast.error(\"\".concat(MATERIAL_DISPLAY_NAMES[materialType], \": \").concat(substage.name, \" must start after \").concat(updatedBatch.combinedData.substages[substageIndex - 1].name, \" ends\"));\n                    return false;\n                }\n            }\n        }\n        if (substageIndex < updatedBatch.combinedData.substages.length - 1) {\n            const nextStage = updatedBatch.combinedData.substages[substageIndex + 1].materials[materialType];\n            if (tempMaterialData.endDate && tempMaterialData.endTime && nextStage.startDate && nextStage.startTime) {\n                const currentEnd = combineDateTime(tempMaterialData.endDate, tempMaterialData.endTime);\n                const nextStart = combineDateTime(nextStage.startDate, nextStage.startTime);\n                if (currentEnd && nextStart && new Date(currentEnd) > new Date(nextStart)) {\n                    toast.error(\"\".concat(MATERIAL_DISPLAY_NAMES[materialType], \": \").concat(updatedBatch.combinedData.substages[substageIndex + 1].name, \" must start after \").concat(substage.name, \" ends\"));\n                    return false;\n                }\n            }\n        }\n        return true;\n    };\n    const getMinEndDate = (materialData)=>{\n        if (materialData.startDate) {\n            return materialData.startDate;\n        }\n        return undefined;\n    };\n    const getMinEndTime = (materialData)=>{\n        if (materialData.startDate === materialData.endDate && materialData.startTime) {\n            return materialData.startTime;\n        }\n        return undefined;\n    };\n    const handleInputChange = (substageIndex, materialType, field, value)=>{\n        if (readOnly) return;\n        const updatedBatch = JSON.parse(JSON.stringify(batch));\n        const substage = updatedBatch.combinedData.substages[substageIndex];\n        const materialData = substage.materials[materialType];\n        if (field === 'startDate' || field === 'startTime' || field === 'endDate' || field === 'endTime') {\n            if (!validateDateRange(substage, materialType, field, value)) {\n                return;\n            }\n        }\n        materialData[field] = value;\n        if (!validateStageSequence(substageIndex, materialType, field, value, updatedBatch)) {\n            return;\n        }\n        if (materialData.startDate && materialData.startTime && materialData.endDate && materialData.endTime) {\n            const startDateTime = new Date(\"\".concat(materialData.startDate, \"T\").concat(materialData.startTime));\n            const endDateTime = new Date(\"\".concat(materialData.endDate, \"T\").concat(materialData.endTime));\n            const diffHours = (endDateTime - startDateTime) / (1000 * 60 * 60);\n            materialData.totalHours = diffHours.toFixed(1);\n        }\n        onUpdate(updatedBatch);\n    };\n    const headerMaterials = getHeaderMaterials();\n    const materialCount = presentMaterialTypes.length;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"table-section\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                className: \"table-title\",\n                children: [\n                    \"Bunker Process \",\n                    materialCount > 1 ? \"(\".concat(headerMaterials.join(' + '), \")\") : headerMaterials[0]\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                lineNumber: 668,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"entry-table-container\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"table\", {\n                    className: \"entry-table unified-platform-table\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"thead\", {\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"tr\", {\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"th\", {\n                                            rowSpan: \"2\",\n                                            children: \"Substage\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                                            lineNumber: 675,\n                                            columnNumber: 15\n                                        }, undefined),\n                                        presentMaterialTypes.map((materialType)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((react__WEBPACK_IMPORTED_MODULE_1___default().Fragment), {\n                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"th\", {\n                                                    colSpan: \"9\",\n                                                    className: \"material-header\",\n                                                    children: MATERIAL_DISPLAY_NAMES[materialType]\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                                                    lineNumber: 678,\n                                                    columnNumber: 19\n                                                }, undefined)\n                                            }, materialType, false, {\n                                                fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                                                lineNumber: 677,\n                                                columnNumber: 17\n                                            }, undefined))\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                                    lineNumber: 674,\n                                    columnNumber: 13\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"tr\", {\n                                    children: presentMaterialTypes.map((materialType)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((react__WEBPACK_IMPORTED_MODULE_1___default().Fragment), {\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"th\", {\n                                                    colSpan: \"2\",\n                                                    children: \"Start\"\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                                                    lineNumber: 687,\n                                                    columnNumber: 19\n                                                }, undefined),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"th\", {\n                                                    colSpan: \"2\",\n                                                    children: \"End\"\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                                                    lineNumber: 688,\n                                                    columnNumber: 19\n                                                }, undefined),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"th\", {\n                                                    children: \"Hours\"\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                                                    lineNumber: 689,\n                                                    columnNumber: 19\n                                                }, undefined),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"th\", {\n                                                    children: \"Moisture (%)\"\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                                                    lineNumber: 690,\n                                                    columnNumber: 19\n                                                }, undefined),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"th\", {\n                                                    children: \"Temp (\\xb0C)\"\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                                                    lineNumber: 691,\n                                                    columnNumber: 19\n                                                }, undefined),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"th\", {\n                                                    colSpan: \"2\",\n                                                    children: \"Remarks\"\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                                                    lineNumber: 692,\n                                                    columnNumber: 19\n                                                }, undefined)\n                                            ]\n                                        }, \"\".concat(materialType, \"-headers\"), true, {\n                                            fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                                            lineNumber: 686,\n                                            columnNumber: 17\n                                        }, undefined))\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                                    lineNumber: 684,\n                                    columnNumber: 13\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"tr\", {\n                                    children: presentMaterialTypes.map((materialType)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((react__WEBPACK_IMPORTED_MODULE_1___default().Fragment), {\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"th\", {\n                                                    children: \"Date\"\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                                                    lineNumber: 699,\n                                                    columnNumber: 19\n                                                }, undefined),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"th\", {\n                                                    children: \"Time\"\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                                                    lineNumber: 700,\n                                                    columnNumber: 19\n                                                }, undefined),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"th\", {\n                                                    children: \"Date\"\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                                                    lineNumber: 701,\n                                                    columnNumber: 19\n                                                }, undefined),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"th\", {\n                                                    children: \"Time\"\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                                                    lineNumber: 702,\n                                                    columnNumber: 19\n                                                }, undefined),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"th\", {}, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                                                    lineNumber: 703,\n                                                    columnNumber: 19\n                                                }, undefined),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"th\", {}, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                                                    lineNumber: 704,\n                                                    columnNumber: 19\n                                                }, undefined),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"th\", {}, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                                                    lineNumber: 705,\n                                                    columnNumber: 19\n                                                }, undefined),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"th\", {\n                                                    colSpan: \"2\"\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                                                    lineNumber: 706,\n                                                    columnNumber: 19\n                                                }, undefined)\n                                            ]\n                                        }, \"\".concat(materialType, \"-subheaders\"), true, {\n                                            fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                                            lineNumber: 698,\n                                            columnNumber: 17\n                                        }, undefined))\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                                    lineNumber: 696,\n                                    columnNumber: 13\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                            lineNumber: 673,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"tbody\", {\n                            children: batch.combinedData.substages.map((substage, substageIndex)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"tr\", {\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"td\", {\n                                            className: \"substage-name\",\n                                            children: substage.name\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                                            lineNumber: 714,\n                                            columnNumber: 17\n                                        }, undefined),\n                                        presentMaterialTypes.map((materialType)=>{\n                                            const materialData = substage.materials[materialType];\n                                            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((react__WEBPACK_IMPORTED_MODULE_1___default().Fragment), {\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"td\", {\n                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                            type: \"date\",\n                                                            value: materialData.startDate || '',\n                                                            onChange: (e)=>handleInputChange(substageIndex, materialType, 'startDate', e.target.value),\n                                                            className: \"table-input\",\n                                                            disabled: readOnly,\n                                                            max: materialData.endDate || undefined\n                                                        }, void 0, false, {\n                                                            fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                                                            lineNumber: 720,\n                                                            columnNumber: 25\n                                                        }, undefined)\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                                                        lineNumber: 719,\n                                                        columnNumber: 23\n                                                    }, undefined),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"td\", {\n                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                            type: \"time\",\n                                                            value: materialData.startTime || '',\n                                                            onChange: (e)=>handleInputChange(substageIndex, materialType, 'startTime', e.target.value),\n                                                            className: \"table-input\",\n                                                            disabled: readOnly,\n                                                            max: materialData.startDate === materialData.endDate ? materialData.endTime : undefined\n                                                        }, void 0, false, {\n                                                            fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                                                            lineNumber: 730,\n                                                            columnNumber: 25\n                                                        }, undefined)\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                                                        lineNumber: 729,\n                                                        columnNumber: 23\n                                                    }, undefined),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"td\", {\n                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                            type: \"date\",\n                                                            value: materialData.endDate || '',\n                                                            onChange: (e)=>handleInputChange(substageIndex, materialType, 'endDate', e.target.value),\n                                                            className: \"table-input\",\n                                                            disabled: readOnly,\n                                                            min: getMinEndDate(materialData)\n                                                        }, void 0, false, {\n                                                            fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                                                            lineNumber: 740,\n                                                            columnNumber: 25\n                                                        }, undefined)\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                                                        lineNumber: 739,\n                                                        columnNumber: 23\n                                                    }, undefined),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"td\", {\n                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                            type: \"time\",\n                                                            value: materialData.endTime || '',\n                                                            onChange: (e)=>handleInputChange(substageIndex, materialType, 'endTime', e.target.value),\n                                                            className: \"table-input\",\n                                                            disabled: readOnly,\n                                                            min: getMinEndTime(materialData)\n                                                        }, void 0, false, {\n                                                            fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                                                            lineNumber: 750,\n                                                            columnNumber: 25\n                                                        }, undefined)\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                                                        lineNumber: 749,\n                                                        columnNumber: 23\n                                                    }, undefined),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"td\", {\n                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                            type: \"text\",\n                                                            value: materialData.totalHours || '',\n                                                            readOnly: true,\n                                                            className: \"table-input hours-input\",\n                                                            placeholder: \"Auto\"\n                                                        }, void 0, false, {\n                                                            fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                                                            lineNumber: 760,\n                                                            columnNumber: 25\n                                                        }, undefined)\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                                                        lineNumber: 759,\n                                                        columnNumber: 23\n                                                    }, undefined),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"td\", {\n                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                            type: \"number\",\n                                                            value: materialData.moisture || '',\n                                                            onChange: (e)=>handleInputChange(substageIndex, materialType, 'moisture', e.target.value),\n                                                            className: \"table-input moisture-input\",\n                                                            placeholder: \"%\",\n                                                            min: \"0\",\n                                                            max: \"100\",\n                                                            step: \"0.1\",\n                                                            disabled: readOnly\n                                                        }, void 0, false, {\n                                                            fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                                                            lineNumber: 769,\n                                                            columnNumber: 25\n                                                        }, undefined)\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                                                        lineNumber: 768,\n                                                        columnNumber: 23\n                                                    }, undefined),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"td\", {\n                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                            type: \"number\",\n                                                            value: materialData.temperature || '',\n                                                            onChange: (e)=>handleInputChange(substageIndex, materialType, 'temperature', e.target.value),\n                                                            className: \"table-input temperature-input\",\n                                                            placeholder: \"\\xb0C\",\n                                                            min: \"0\",\n                                                            max: \"100\",\n                                                            step: \"0.1\",\n                                                            disabled: readOnly\n                                                        }, void 0, false, {\n                                                            fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                                                            lineNumber: 782,\n                                                            columnNumber: 25\n                                                        }, undefined)\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                                                        lineNumber: 781,\n                                                        columnNumber: 23\n                                                    }, undefined),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"td\", {\n                                                        colSpan: 2,\n                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                            type: \"text\",\n                                                            value: materialData.remarks || '',\n                                                            onChange: (e)=>handleInputChange(substageIndex, materialType, 'remarks', e.target.value),\n                                                            className: \"table-input remarks-input\",\n                                                            placeholder: \"Add remarks...\",\n                                                            disabled: readOnly\n                                                        }, void 0, false, {\n                                                            fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                                                            lineNumber: 795,\n                                                            columnNumber: 25\n                                                        }, undefined)\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                                                        lineNumber: 794,\n                                                        columnNumber: 23\n                                                    }, undefined)\n                                                ]\n                                            }, \"\".concat(substageIndex, \"-\").concat(materialType), true, {\n                                                fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                                                lineNumber: 718,\n                                                columnNumber: 21\n                                            }, undefined);\n                                        })\n                                    ]\n                                }, substageIndex, true, {\n                                    fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                                    lineNumber: 713,\n                                    columnNumber: 15\n                                }, undefined))\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                            lineNumber: 711,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                    lineNumber: 672,\n                    columnNumber: 9\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                lineNumber: 671,\n                columnNumber: 7\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n        lineNumber: 667,\n        columnNumber: 5\n    }, undefined);\n}, \"WUU7e0p6AiTpvVrXhi50JBdcu+0=\", false, function() {\n    return [\n        _components_common_Toaster__WEBPACK_IMPORTED_MODULE_4__.useToast\n    ];\n}));\n_c = CombinedMaterialTable;\nCombinedMaterialTable.displayName = 'CombinedMaterialTable';\nfunction BatchSelection(param) {\n    let { onSelectBatch, loading, error, initialBatchNumber, initialBatchId } = param;\n    _s1();\n    const [batchNumber, setBatchNumber] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(initialBatchNumber || '');\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const toast = (0,_components_common_Toaster__WEBPACK_IMPORTED_MODULE_4__.useToast)();\n    const router = (0,next_navigation__WEBPACK_IMPORTED_MODULE_2__.useRouter)();\n    const searchParams = (0,next_navigation__WEBPACK_IMPORTED_MODULE_2__.useSearchParams)();\n    const hasLoadedRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(false);\n    // Auto-load batch if initialBatchNumber is provided\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"BatchSelection.useEffect\": ()=>{\n            if (initialBatchNumber && !hasLoadedRef.current && !loading) {\n                setBatchNumber(initialBatchNumber);\n                handleLoadBatch(initialBatchNumber, initialBatchId);\n                hasLoadedRef.current = true;\n            }\n        }\n    }[\"BatchSelection.useEffect\"], [\n        initialBatchNumber,\n        initialBatchId,\n        loading\n    ]);\n    const getMaterialsFromBatch = (batchData)=>{\n        const materials = new Set();\n        if (batchData && batchData.formulation_entries) {\n            batchData.formulation_entries.forEach((entry)=>{\n                const materialName = entry.name.toUpperCase();\n                if (MATERIAL_TYPES[materialName] !== undefined) {\n                    materials.add(materialName);\n                    console.log(\"\\uD83D\\uDCCC Found material: \".concat(materialName, \" -> \").concat(MATERIAL_TYPES[materialName]));\n                }\n            });\n        }\n        return Array.from(materials);\n    };\n    const handleLoadBatch = async (batchNum, batchId)=>{\n        if (!batchNum.trim()) {\n            toast.error('Please enter a batch number');\n            return;\n        }\n        setIsLoading(true);\n        try {\n            console.log(\"\\uD83D\\uDD0D Fetching batch details for: \".concat(batchNum, \" with ID: \").concat(batchId || 'unknown'));\n            let selectedBatch = null;\n            let batchIdToUse = batchId;\n            // If batchId is provided, we can use it directly\n            if (batchIdToUse) {\n                // Try to fetch batch details using ID\n                const batchResponse = await fetch(\"\".concat(BATCH_FETCH_ENDPOINT, \"/\").concat(batchIdToUse));\n                if (batchResponse.ok) {\n                    const batchResult = await batchResponse.json();\n                    selectedBatch = batchResult.data || batchResult;\n                } else {\n                    // Fallback to fetching all batches\n                    const allBatchesResponse = await fetch(BATCH_FETCH_ENDPOINT);\n                    if (allBatchesResponse.ok) {\n                        const allBatchesResult = await allBatchesResponse.json();\n                        let batches = [];\n                        if (Array.isArray(allBatchesResult)) {\n                            batches = allBatchesResult;\n                        } else if (allBatchesResult.success) {\n                            batches = allBatchesResult.data;\n                        }\n                        selectedBatch = batches.find((b)=>b.id === batchIdToUse);\n                    }\n                }\n            } else {\n                // No batchId provided, fetch by batch number\n                const batchResponse = await fetch(BATCH_FETCH_ENDPOINT);\n                if (!batchResponse.ok) {\n                    throw new Error('Failed to fetch batches');\n                }\n                const batchResult = await batchResponse.json();\n                let batches = [];\n                if (Array.isArray(batchResult)) {\n                    batches = batchResult;\n                } else if (batchResult.success) {\n                    batches = batchResult.data;\n                }\n                selectedBatch = batches.find((b)=>b.batch_number === batchNum.trim());\n            }\n            if (!selectedBatch) {\n                toast.error('Batch number not found');\n                setIsLoading(false);\n                return;\n            }\n            console.log('âœ… Found batch:', selectedBatch);\n            const materials = getMaterialsFromBatch(selectedBatch);\n            if (materials.length === 0) {\n                toast.error('No suitable materials (Bagasse, Wheat Straw, or Paddy Straw) found in this batch');\n                setIsLoading(false);\n                return;\n            }\n            console.log(\"\\uD83D\\uDCCB Materials to process:\", materials);\n            const newBatch = createEmptyBatch(batchNum, materials, selectedBatch.id);\n            newBatch.batchData = selectedBatch;\n            console.log('ðŸ“Š Fetching bunker data for batch ID:', selectedBatch.id);\n            const strawDataResult = await fetchBatchData(selectedBatch.id);\n            if (strawDataResult.success && strawDataResult.data) {\n                console.log('ðŸ“¦ Raw API data:', strawDataResult.data);\n                const populatedBatch = convertApiResponseToUI(strawDataResult.data, newBatch);\n                console.log('âœ… Populated batch:', populatedBatch);\n                onSelectBatch(populatedBatch);\n                toast.success(\"Loaded batch \".concat(batchNum, \" with existing data (\").concat(materials.length, \" material\").concat(materials.length > 1 ? 's' : '', \")\"));\n            } else if (strawDataResult.success && !strawDataResult.data) {\n                onSelectBatch(newBatch);\n                toast.success(\"Loaded batch \".concat(batchNum, \" (\").concat(materials.length, \" material\").concat(materials.length > 1 ? 's' : '', \" - no existing data)\"));\n            } else {\n                toast.warning(\"Loaded batch \".concat(batchNum, \" but failed to fetch existing data\"));\n                onSelectBatch(newBatch);\n            }\n        } catch (err) {\n            console.error('âŒ Error loading batch:', err);\n            toast.error('Error loading batch details. Please try again.');\n        } finally{\n            setIsLoading(false);\n        }\n    };\n    const handleCreateNew = ()=>{\n        if (isLoading || loading) return;\n        handleLoadBatch(batchNumber);\n    };\n    const handleBackClick = ()=>{\n        // Clear the URL params when going back\n        router.push('/bunker-management');\n        // Clear the batch number and allow new input\n        setBatchNumber('');\n        hasLoadedRef.current = false;\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"batch-selection\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                children: \"Bunker Management Process Entry\"\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                lineNumber: 968,\n                columnNumber: 7\n            }, this),\n            error && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"error-message\",\n                children: [\n                    \"Error: \",\n                    error\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                lineNumber: 971,\n                columnNumber: 9\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"selection-panel\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"new-batch-section\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                            children: \"Enter Batch Number\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                            lineNumber: 978,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"batch-input-group\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                    type: \"text\",\n                                    placeholder: \"Enter Batch Number (e.g., BATCH-001)\",\n                                    value: batchNumber,\n                                    onChange: (e)=>setBatchNumber(e.target.value),\n                                    className: \"batch-input\",\n                                    disabled: isLoading || loading\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                                    lineNumber: 980,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    onClick: handleCreateNew,\n                                    className: \"btn-primary\",\n                                    disabled: isLoading || loading,\n                                    children: isLoading || loading ? 'Loading...' : 'Load Batch'\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                                    lineNumber: 988,\n                                    columnNumber: 13\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                            lineNumber: 979,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                    lineNumber: 977,\n                    columnNumber: 9\n                }, this)\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                lineNumber: 976,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n        lineNumber: 967,\n        columnNumber: 5\n    }, this);\n}\n_s1(BatchSelection, \"bSsv6SxcH5WNCl5iqtC1T5kE3FA=\", false, function() {\n    return [\n        _components_common_Toaster__WEBPACK_IMPORTED_MODULE_4__.useToast,\n        next_navigation__WEBPACK_IMPORTED_MODULE_2__.useRouter,\n        next_navigation__WEBPACK_IMPORTED_MODULE_2__.useSearchParams\n    ];\n});\n_c1 = BatchSelection;\nfunction BunkerManagementContent() {\n    _s2();\n    const router = (0,next_navigation__WEBPACK_IMPORTED_MODULE_2__.useRouter)();\n    const toast = (0,_components_common_Toaster__WEBPACK_IMPORTED_MODULE_4__.useToast)();\n    const searchParams = (0,next_navigation__WEBPACK_IMPORTED_MODULE_2__.useSearchParams)();\n    const [currentBatch, setCurrentBatch] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [savedBatches, setSavedBatches] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [initialBatchNumber, setInitialBatchNumber] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [initialBatchId, setInitialBatchId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const isSavingRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(false);\n    // Get batch number and ID from URL params\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"BunkerManagementContent.useEffect\": ()=>{\n            const batchNum = searchParams.get('batch');\n            const batchId = searchParams.get('batchId');\n            if (batchNum) {\n                setInitialBatchNumber(batchNum);\n                setInitialBatchId(batchId);\n            }\n        }\n    }[\"BunkerManagementContent.useEffect\"], [\n        searchParams\n    ]);\n    const handleSelectBatch = (batch)=>{\n        console.log('âœ… Setting current batch:', batch);\n        setCurrentBatch(batch);\n    };\n    const handleUpdateBatch = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"BunkerManagementContent.useCallback[handleUpdateBatch]\": (updatedBatch)=>{\n            setCurrentBatch(updatedBatch);\n        }\n    }[\"BunkerManagementContent.useCallback[handleUpdateBatch]\"], []);\n    const validateBatchData = (batch)=>{\n        const materialTypes = batch.materials.map((m)=>MATERIAL_TYPES[m]);\n        for (const materialType of materialTypes){\n            // Validate each material's data\n            for(let i = 0; i < batch.combinedData.substages.length; i++){\n                const substage = batch.combinedData.substages[i];\n                const materialData = substage.materials[materialType];\n                if (materialData.startDate && materialData.startTime && materialData.endDate && materialData.endTime) {\n                    const startDateTime = new Date(\"\".concat(materialData.startDate, \"T\").concat(materialData.startTime));\n                    const endDateTime = new Date(\"\".concat(materialData.endDate, \"T\").concat(materialData.endTime));\n                    if (startDateTime > endDateTime) {\n                        toast.error(\"\".concat(MATERIAL_DISPLAY_NAMES[materialType], \" - \").concat(substage.name, \": End date/time cannot be before start date/time\"));\n                        return false;\n                    }\n                }\n                if ((materialData.startDate || materialData.startTime) && (!materialData.startDate || !materialData.startTime)) {\n                    toast.error(\"Please complete both date and time for \".concat(MATERIAL_DISPLAY_NAMES[materialType], \" - \").concat(substage.name, \" start\"));\n                    return false;\n                }\n                if ((materialData.endDate || materialData.endTime) && (!materialData.endDate || !materialData.endTime)) {\n                    toast.error(\"Please complete both date and time for \".concat(MATERIAL_DISPLAY_NAMES[materialType], \" - \").concat(substage.name, \" end\"));\n                    return false;\n                }\n            }\n            if (!validateStageSequencing(batch.combinedData, materialType, toast)) {\n                return false;\n            }\n        }\n        return true;\n    };\n    const handleSave = async ()=>{\n        if (!currentBatch || isSavingRef.current) return;\n        console.log('\\n========== ðŸš€ SAVE STARTED ==========');\n        console.log(\"Batch: \".concat(currentBatch.batchNumber, \" (ID: \").concat(currentBatch.id, \")\"));\n        console.log(\"Total materials: \".concat(currentBatch.materials.length));\n        isSavingRef.current = true;\n        setLoading(true);\n        try {\n            const results = [];\n            let hasAnyDataToSave = false;\n            let successCount = 0;\n            let failCount = 0;\n            const materialTypes = currentBatch.materials.map((m)=>MATERIAL_TYPES[m]);\n            for (const materialType of materialTypes){\n                const displayName = MATERIAL_DISPLAY_NAMES[materialType];\n                console.log(\"\\n--- \\uD83D\\uDCDD Processing material: \".concat(displayName, \" ---\"));\n                // Check if material has complete data\n                if (hasCompleteMaterialData(currentBatch.combinedData, materialType)) {\n                    const payload = convertToApiPayload(currentBatch, materialType, false);\n                    if (payload) {\n                        hasAnyDataToSave = true;\n                        console.log(\"\\uD83D\\uDCE4 Making API call for \".concat(displayName));\n                        const result = await sendToApi(payload, materialType, displayName);\n                        results.push(result);\n                        if (result.success) {\n                            successCount++;\n                            toast.success(\"\".concat(displayName, \" data saved successfully!\"));\n                        } else {\n                            failCount++;\n                            toast.error(\"Failed to save \".concat(displayName, \" data: \").concat(result.error));\n                        }\n                    }\n                } else {\n                    console.log(\"â­ï¸ \".concat(displayName, \" has incomplete data, skipping\"));\n                }\n            }\n            console.log('\\n========== ðŸ“Š SAVE SUMMARY ==========');\n            console.log(\"Total API calls attempted: \".concat(results.length));\n            console.log(\"âœ… Successful: \".concat(successCount));\n            console.log(\"âŒ Failed: \".concat(failCount));\n            console.log('=====================================\\n');\n            if (!hasAnyDataToSave) {\n                toast.info('No complete data to save. Please fill in all required fields for at least one material.');\n                setLoading(false);\n                isSavingRef.current = false;\n                return;\n            }\n            const existingIndex = savedBatches.findIndex((b)=>b.id === currentBatch.id);\n            if (existingIndex >= 0) {\n                const updated = [\n                    ...savedBatches\n                ];\n                updated[existingIndex] = {\n                    ...currentBatch,\n                    status: 'draft'\n                };\n                setSavedBatches(updated);\n            } else {\n                setSavedBatches([\n                    ...savedBatches,\n                    {\n                        ...currentBatch,\n                        status: 'draft'\n                    }\n                ]);\n            }\n            const allSuccess = results.every((r)=>r.success);\n            if (allSuccess) {\n                toast.success(\"All \".concat(successCount, \" material data saved successfully!\"));\n            } else {\n                toast.warning(\"\".concat(successCount, \" material(s) saved successfully, \").concat(failCount, \" failed\"));\n            }\n        } catch (error) {\n            toast.error('Failed to save batch data');\n            console.error('âŒ Save error:', error);\n        } finally{\n            setLoading(false);\n            setTimeout(()=>{\n                isSavingRef.current = false;\n            }, 1000);\n        }\n    };\n    const handleBackToSelection = ()=>{\n        // Clear the current batch to show the selection UI\n        setCurrentBatch(null);\n        // Clear URL params when going back\n        router.push('/bunker-management');\n        // Clear any saved state\n        setError(null);\n        // Reset the initial batch number state if needed\n        setInitialBatchNumber(null);\n        setInitialBatchId(null);\n    };\n    if (!currentBatch) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_AppLayout__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n            title: \"Bunker Management\",\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"unified-platform-container\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(BatchSelection, {\n                    onSelectBatch: handleSelectBatch,\n                    loading: loading,\n                    error: error,\n                    initialBatchNumber: initialBatchNumber,\n                    initialBatchId: initialBatchId\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                    lineNumber: 1171,\n                    columnNumber: 11\n                }, this)\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                lineNumber: 1170,\n                columnNumber: 9\n            }, this)\n        }, void 0, false, {\n            fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n            lineNumber: 1169,\n            columnNumber: 7\n        }, this);\n    }\n    const materialNames = currentBatch.materials.map((m)=>MATERIAL_DISPLAY_NAMES[MATERIAL_TYPES[m]]).join(' + ');\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_AppLayout__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n        title: \"Bunker Management\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"unified-platform-container\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"entry-header\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"header-left\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    onClick: handleBackToSelection,\n                                    className: \"back-button\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_mui_icons_material_ArrowBack__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {}, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                                        lineNumber: 1191,\n                                        columnNumber: 15\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                                    lineNumber: 1190,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                                    children: currentBatch.batchNumber\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                                    lineNumber: 1193,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    className: \"material-count\",\n                                    children: [\n                                        \"(\",\n                                        materialNames,\n                                        \")\"\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                                    lineNumber: 1194,\n                                    columnNumber: 13\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                            lineNumber: 1189,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"header-actions\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: handleSave,\n                                className: \"btn-save\",\n                                disabled: loading,\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_mui_icons_material_Save__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n                                        fontSize: \"small\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                                        lineNumber: 1204,\n                                        columnNumber: 15\n                                    }, this),\n                                    loading ? 'Saving...' : 'Save'\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                                lineNumber: 1199,\n                                columnNumber: 13\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                            lineNumber: 1198,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                    lineNumber: 1188,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(CombinedMaterialTable, {\n                    batch: currentBatch,\n                    onUpdate: handleUpdateBatch,\n                    readOnly: false\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n                    lineNumber: 1210,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n            lineNumber: 1187,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n        lineNumber: 1186,\n        columnNumber: 5\n    }, this);\n}\n_s2(BunkerManagementContent, \"PUbbqGT2gViP6CyESGXBoqQMJNQ=\", false, function() {\n    return [\n        next_navigation__WEBPACK_IMPORTED_MODULE_2__.useRouter,\n        _components_common_Toaster__WEBPACK_IMPORTED_MODULE_4__.useToast,\n        next_navigation__WEBPACK_IMPORTED_MODULE_2__.useSearchParams\n    ];\n});\n_c2 = BunkerManagementContent;\nfunction BunkerManagement() {\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_common_Toaster__WEBPACK_IMPORTED_MODULE_4__.ToastProvider, {\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(BunkerManagementContent, {}, void 0, false, {\n            fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n            lineNumber: 1223,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\Admin\\\\Downloads\\\\britishagro-admin-panel\\\\britishagro\\\\app\\\\(pages)\\\\bunker-management\\\\page.jsx\",\n        lineNumber: 1222,\n        columnNumber: 5\n    }, this);\n}\n_c3 = BunkerManagement;\nvar _c, _c1, _c2, _c3;\n$RefreshReg$(_c, \"CombinedMaterialTable\");\n$RefreshReg$(_c1, \"BatchSelection\");\n$RefreshReg$(_c2, \"BunkerManagementContent\");\n$RefreshReg$(_c3, \"BunkerManagement\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2FwcC8ocGFnZXMpL2J1bmtlci1tYW5hZ2VtZW50L3BhZ2UuanN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUN3RTtBQUNYO0FBQ1Y7QUFDdUI7QUFDekI7QUFFRDtBQUNnQjtBQUNOO0FBRTFELE1BQU1hLGlCQUFpQjtJQUNyQixXQUFXO0lBQ1gsZUFBZTtJQUNmLGVBQWU7QUFDakI7QUFFQSxNQUFNQyx5QkFBeUI7SUFDN0IsV0FBVztJQUNYLFNBQVM7SUFDVCxTQUFTO0FBQ1g7QUFFQSxNQUFNQyxlQUFlQywyQkFBK0I7QUFDcEQsTUFBTUcsZUFBZSxHQUFnQixPQUFiSixjQUFhO0FBQ3JDLE1BQU1LLHFCQUFxQixHQUFnQixPQUFiTCxjQUFhO0FBQzNDLE1BQU1NLHVCQUF1QixHQUFnQixPQUFiTixjQUFhO0FBRTdDLE1BQU1PLGNBQWM7SUFDbEI7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0NBQ0Q7QUFFRCw2REFBNkQ7QUFDN0QsTUFBTUMseUJBQXlCLENBQUNDLE9BQVU7UUFDeENBLE1BQU1BO1FBQ05DLFdBQVc7WUFDVCxXQUFXO2dCQUNUQyxXQUFXO2dCQUNYQyxXQUFXO2dCQUNYQyxTQUFTO2dCQUNUQyxTQUFTO2dCQUNUQyxZQUFZO2dCQUNaQyxVQUFVO2dCQUNWQyxhQUFhO2dCQUNiQyxTQUFTO2dCQUNUQyxVQUFVO1lBQ1o7WUFDQSxTQUFTO2dCQUNQUixXQUFXO2dCQUNYQyxXQUFXO2dCQUNYQyxTQUFTO2dCQUNUQyxTQUFTO2dCQUNUQyxZQUFZO2dCQUNaQyxVQUFVO2dCQUNWQyxhQUFhO2dCQUNiQyxTQUFTO2dCQUNUQyxVQUFVO1lBQ1o7WUFDQSxTQUFTO2dCQUNQUixXQUFXO2dCQUNYQyxXQUFXO2dCQUNYQyxTQUFTO2dCQUNUQyxTQUFTO2dCQUNUQyxZQUFZO2dCQUNaQyxVQUFVO2dCQUNWQyxhQUFhO2dCQUNiQyxTQUFTO2dCQUNUQyxVQUFVO1lBQ1o7UUFDRjtJQUNGO0FBRUEsTUFB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QUFBQSxJQUFLL0ssc0JBQXNCLENBQUNELGNBQWMsQ0FBQ2dMLEVBQUUsQ0FBQyxFQUFFUCxJQUFJLENBQUM7SUFFdEcscUJBQ0UsOERBQUMvSyw2REFBU0E7UUFBQ3dTLE9BQU07a0JBQ2YsNEVBQUM1RjtZQUFJQyxXQUFVOzs4QkFDYiw4REFBQ0Q7b0JBQUlDLFdBQVU7O3NDQUNiLDhEQUFDRDs0QkFBSUMsV0FBVTs7OENBQ2IsOERBQUM0RDtvQ0FBT0MsU0FBUzZCO29DQUF1QjFGLFdBQVU7OENBQ2hELDRFQUFDeE0scUVBQWFBOzs7Ozs7Ozs7OzhDQUVoQiw4REFBQ21ROzhDQUFJSSxhQUFhN08sV0FBVzs7Ozs7OzhDQUM3Qiw4REFBQzJRO29DQUFLN0YsV0FBVTs7d0NBQWlCO3dDQUM3QjRGO3dDQUFjOzs7Ozs7Ozs7Ozs7O3NDQUdwQiw4REFBQzdGOzRCQUFJQyxXQUFVO3NDQUNiLDRFQUFDNEQ7Z0NBQ0NDLFNBQVNnQjtnQ0FDVDdFLFdBQVU7Z0NBQ1ZlLFVBQVVNOztrREFFViw4REFBQy9OLGdFQUFRQTt3Q0FBQ3dTLFVBQVM7Ozs7OztvQ0FDbEJ6RSxVQUFVLGNBQWM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs4QkFLL0IsOERBQUNqRDtvQkFDQ2hKLE9BQU8yTztvQkFDUHpGLFVBQVVvRztvQkFDVm5HLFVBQVU7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBS3BCO0lBeE5TdUY7O1FBQ1E3USxzREFBU0E7UUFDVkksZ0VBQVFBO1FBQ0RILDREQUFlQTs7O01BSDdCNFE7QUEwTk0sU0FBU2lDO0lBQ3RCLHFCQUNFLDhEQUFDM1MscUVBQWFBO2tCQUNaLDRFQUFDMFE7Ozs7Ozs7Ozs7QUFHUDtNQU53QmlDIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXEFkbWluXFxEb3dubG9hZHNcXGJyaXRpc2hhZ3JvLWFkbWluLXBhbmVsXFxicml0aXNoYWdyb1xcYXBwXFwocGFnZXMpXFxidW5rZXItbWFuYWdlbWVudFxccGFnZS5qc3giXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2UgY2xpZW50XCI7XHJcbmltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZUNhbGxiYWNrIH0gZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCB7IHVzZVJvdXRlciwgdXNlU2VhcmNoUGFyYW1zIH0gZnJvbSBcIm5leHQvbmF2aWdhdGlvblwiO1xyXG5pbXBvcnQgQXBwTGF5b3V0IGZyb20gXCIuLi8uLi9jb21wb25lbnRzL0FwcExheW91dFwiO1xyXG5pbXBvcnQgeyBUb2FzdFByb3ZpZGVyLCB1c2VUb2FzdCB9IGZyb20gXCIuLi8uLi9jb21wb25lbnRzL2NvbW1vbi9Ub2FzdGVyXCI7XHJcbmltcG9ydCBcIi4uLy4uL3N0eWxlcy9wYWdlcy91bmlmaWVkLXBsYXRmb3JtLmNzc1wiO1xyXG5cclxuaW1wb3J0IFNhdmVJY29uIGZyb20gJ0BtdWkvaWNvbnMtbWF0ZXJpYWwvU2F2ZSc7XHJcbmltcG9ydCBBcnJvd0ZvcndhcmRJY29uIGZyb20gJ0BtdWkvaWNvbnMtbWF0ZXJpYWwvQXJyb3dGb3J3YXJkJztcclxuaW1wb3J0IEFycm93QmFja0ljb24gZnJvbSAnQG11aS9pY29ucy1tYXRlcmlhbC9BcnJvd0JhY2snO1xyXG5cclxuY29uc3QgTUFURVJJQUxfVFlQRVMgPSB7XHJcbiAgJ0JBR0FTU0UnOiAnQkFHQVNTRScsXHJcbiAgJ1dIRUFUIFNUUkFXJzogJ1dIRUFUJyxcclxuICAnUEFERFkgU1RSQVcnOiAnUEFERFknXHJcbn07XHJcblxyXG5jb25zdCBNQVRFUklBTF9ESVNQTEFZX05BTUVTID0ge1xyXG4gICdCQUdBU1NFJzogJ0JhZ2Fzc2UnLFxyXG4gICdXSEVBVCc6ICdXaGVhdCBTdHJhdycsXHJcbiAgJ1BBRERZJzogJ1BhZGR5IFN0cmF3J1xyXG59O1xyXG5cclxuY29uc3QgQVBJX0JBU0VfVVJMID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQVBJX1VSTDtcclxuY29uc3QgQVBJX0VORFBPSU5UID0gYCR7QVBJX0JBU0VfVVJMfS9idW5rZXItbWFuYWdlbWVudGA7XHJcbmNvbnN0IEFQSV9GRVRDSF9FTkRQT0lOVCA9IGAke0FQSV9CQVNFX1VSTH0vYnVua2VyLW1hbmFnZW1lbnRgO1xyXG5jb25zdCBCQVRDSF9GRVRDSF9FTkRQT0lOVCA9IGAke0FQSV9CQVNFX1VSTH0vYmF0Y2hlc2A7XHJcblxyXG5jb25zdCBTVEFHRV9OQU1FUyA9IFtcclxuICBcIkJ1bmtlciBQcm9jZXNzIDFcIixcclxuICBcIiBSZXN0XCIsIFxyXG4gIFwiQnVua2VyIFByb2Nlc3MgMlwiLFxyXG4gIFwiQnVua2VyIFByb2Nlc3MgMiBSZXN0XCIsXHJcbiAgXCJCdW5rZXIgUHJvY2VzcyAzXCIsXHJcbiAgXCJCdW5rZXIgUHJvY2VzcyAzIFJlc3RcIlxyXG5dO1xyXG5cclxuLy8gQ3JlYXRlIGEgY29tYmluZWQgZW50cnkgdGhhdCBjYW4gaGFuZGxlIG11bHRpcGxlIG1hdGVyaWFsc1xyXG5jb25zdCBjcmVhdGVDb21iaW5lZFN1YnN0YWdlID0gKG5hbWUpID0+ICh7XHJcbiAgbmFtZTogbmFtZSxcclxuICBtYXRlcmlhbHM6IHtcclxuICAgICdCQUdBU1NFJzoge1xyXG4gICAgICBzdGFydERhdGU6ICcnLFxyXG4gICAgICBzdGFydFRpbWU6ICcnLFxyXG4gICAgICBlbmREYXRlOiAnJyxcclxuICAgICAgZW5kVGltZTogJycsXHJcbiAgICAgIHRvdGFsSG91cnM6ICcnLFxyXG4gICAgICBtb2lzdHVyZTogJycsXHJcbiAgICAgIHRlbXBlcmF0dXJlOiAnJyxcclxuICAgICAgcmVtYXJrczogJycsXHJcbiAgICAgIHJlY29yZElkOiBudWxsXHJcbiAgICB9LFxyXG4gICAgJ1dIRUFUJzoge1xyXG4gICAgICBzdGFydERhdGU6ICcnLFxyXG4gICAgICBzdGFydFRpbWU6ICcnLFxyXG4gICAgICBlbmREYXRlOiAnJyxcclxuICAgICAgZW5kVGltZTogJycsXHJcbiAgICAgIHRvdGFsSG91cnM6ICcnLFxyXG4gICAgICBtb2lzdHVyZTogJycsXHJcbiAgICAgIHRlbXBlcmF0dXJlOiAnJyxcclxuICAgICAgcmVtYXJrczogJycsXHJcbiAgICAgIHJlY29yZElkOiBudWxsXHJcbiAgICB9LFxyXG4gICAgJ1BBRERZJzoge1xyXG4gICAgICBzdGFydERhdGU6ICcnLFxyXG4gICAgICBzdGFydFRpbWU6ICcnLFxyXG4gICAgICBlbmREYXRlOiAnJyxcclxuICAgICAgZW5kVGltZTogJycsXHJcbiAgICAgIHRvdGFsSG91cnM6ICcnLFxyXG4gICAgICBtb2lzdHVyZTogJycsXHJcbiAgICAgIHRlbXBlcmF0dXJlOiAnJyxcclxuICAgICAgcmVtYXJrczogJycsXHJcbiAgICAgIHJlY29yZElkOiBudWxsXHJcbiAgICB9XHJcbiAgfVxyXG59KTtcclxuXHJcbmNvbnN0IGNyZWF0ZUVtcHR5U3Vic3RhZ2UgPSAobmFtZSwgaW5jbHVkZU1vaXN0dXJlID0gdHJ1ZSkgPT4gKHtcclxuICBuYW1lOiBuYW1lLFxyXG4gIHN0YXJ0RGF0ZTogJycsXHJcbiAgc3RhcnRUaW1lOiAnJyxcclxuICBlbmREYXRlOiAnJyxcclxuICBlbmRUaW1lOiAnJyxcclxuICB0b3RhbEhvdXJzOiAnJyxcclxuICBtb2lzdHVyZTogJycsXHJcbiAgdGVtcGVyYXR1cmU6ICcnLFxyXG4gIHJlbWFya3M6ICcnXHJcbn0pO1xyXG5cclxuY29uc3QgY3JlYXRlRW1wdHlCYXRjaCA9IChiYXRjaE51bWJlciwgbWF0ZXJpYWxzID0gW10sIGJhdGNoSWQgPSBudWxsKSA9PiB7XHJcbiAgY29uc3QgYmF0Y2ggPSB7XHJcbiAgICBpZDogYmF0Y2hJZCB8fCBEYXRlLm5vdygpLFxyXG4gICAgYmF0Y2hOdW1iZXI6IGJhdGNoTnVtYmVyLFxyXG4gICAgbWF0ZXJpYWxzOiBtYXRlcmlhbHMsIC8vIFN0b3JlIHRoZSBsaXN0IG9mIG1hdGVyaWFscyBwcmVzZW50XHJcbiAgICBiYXRjaERhdGE6IG51bGwsXHJcbiAgICBleGlzdGluZ1JlY29yZHM6IHt9LFxyXG4gICAgY29tYmluZWREYXRhOiB7XHJcbiAgICAgIHN1YnN0YWdlczogU1RBR0VfTkFNRVMubWFwKG5hbWUgPT4gY3JlYXRlQ29tYmluZWRTdWJzdGFnZShuYW1lKSlcclxuICAgIH1cclxuICB9O1xyXG5cclxuICByZXR1cm4gYmF0Y2g7XHJcbn07XHJcblxyXG5jb25zdCBwYXJzZURhdGVUaW1lID0gKGRhdGV0aW1lKSA9PiB7XHJcbiAgaWYgKCFkYXRldGltZSkgcmV0dXJuIHsgZGF0ZTogJycsIHRpbWU6ICcnIH07XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShkYXRldGltZSk7XHJcbiAgICBpZiAoaXNOYU4oZGF0ZS5nZXRUaW1lKCkpKSByZXR1cm4geyBkYXRlOiAnJywgdGltZTogJycgfTtcclxuICAgIFxyXG4gICAgY29uc3QgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcclxuICAgIGNvbnN0IG1vbnRoID0gU3RyaW5nKGRhdGUuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJyk7XHJcbiAgICBjb25zdCBkYXkgPSBTdHJpbmcoZGF0ZS5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsICcwJyk7XHJcbiAgICBjb25zdCBob3VycyA9IFN0cmluZyhkYXRlLmdldEhvdXJzKCkpLnBhZFN0YXJ0KDIsICcwJyk7XHJcbiAgICBjb25zdCBtaW51dGVzID0gU3RyaW5nKGRhdGUuZ2V0TWludXRlcygpKS5wYWRTdGFydCgyLCAnMCcpO1xyXG4gICAgXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBkYXRlOiBgJHt5ZWFyfS0ke21vbnRofS0ke2RheX1gLFxyXG4gICAgICB0aW1lOiBgJHtob3Vyc306JHttaW51dGVzfWBcclxuICAgIH07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHBhcnNpbmcgZGF0ZXRpbWU6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIHsgZGF0ZTogJycsIHRpbWU6ICcnIH07XHJcbiAgfVxyXG59O1xyXG5cclxuY29uc3QgY2FsY3VsYXRlSG91cnMgPSAoc3RhcnREYXRlVGltZSwgZW5kRGF0ZVRpbWUpID0+IHtcclxuICBpZiAoIXN0YXJ0RGF0ZVRpbWUgfHwgIWVuZERhdGVUaW1lKSByZXR1cm4gJyc7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHN0YXJ0ID0gbmV3IERhdGUoc3RhcnREYXRlVGltZSk7XHJcbiAgICBjb25zdCBlbmQgPSBuZXcgRGF0ZShlbmREYXRlVGltZSk7XHJcbiAgICBpZiAoaXNOYU4oc3RhcnQuZ2V0VGltZSgpKSB8fCBpc05hTihlbmQuZ2V0VGltZSgpKSkgcmV0dXJuICcnO1xyXG4gICAgXHJcbiAgICBjb25zdCBkaWZmSG91cnMgPSAoZW5kIC0gc3RhcnQpIC8gKDEwMDAgKiA2MCAqIDYwKTtcclxuICAgIHJldHVybiBkaWZmSG91cnMudG9GaXhlZCgxKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgcmV0dXJuICcnO1xyXG4gIH1cclxufTtcclxuXHJcbmNvbnN0IGZldGNoQmF0Y2hEYXRhID0gYXN5bmMgKGJhdGNoSWQpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc29sZS5sb2coYPCfk4ogRmV0Y2hpbmcgYnVua2VyIGRhdGEgZm9yIGJhdGNoIElEOiAke2JhdGNoSWR9YCk7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke0FQSV9GRVRDSF9FTkRQT0lOVH0vJHtiYXRjaElkfWApO1xyXG4gICAgXHJcbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwNCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5OtIE5vIGV4aXN0aW5nIGJ1bmtlciBkYXRhIGZvdW5kIGZvciBiYXRjaCcpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IG51bGwgfTtcclxuICAgICAgfVxyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBmZXRjaCBidW5rZXIgZGF0YTogJHtyZXNwb25zZS5zdGF0dXN9YCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNvbnN0IHJlc3BvbnNlRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgIGNvbnNvbGUubG9nKCfwn5OmIEZldGNoZWQgYnVua2VyIGRhdGE6JywgcmVzcG9uc2VEYXRhKTtcclxuICAgIFxyXG4gICAgaWYgKHJlc3BvbnNlRGF0YS5zdWNjZXNzICYmIHJlc3BvbnNlRGF0YS5kYXRhICYmIHJlc3BvbnNlRGF0YS5kYXRhLml0ZW1zKSB7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHJlc3BvbnNlRGF0YS5kYXRhLml0ZW1zIH07XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGlmIChyZXNwb25zZURhdGEuZGF0YSAmJiBBcnJheS5pc0FycmF5KHJlc3BvbnNlRGF0YS5kYXRhKSkge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXNwb25zZURhdGEuZGF0YSB9O1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpZiAoQXJyYXkuaXNBcnJheShyZXNwb25zZURhdGEpKSB7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHJlc3BvbnNlRGF0YSB9O1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpZiAocmVzcG9uc2VEYXRhLmlkIHx8IHJlc3BvbnNlRGF0YS5iYXRjaF9pZCkge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBbcmVzcG9uc2VEYXRhXSB9O1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBudWxsIH07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBFcnJvciBmZXRjaGluZyBidW5rZXIgZGF0YTonLCBlcnJvcik7XHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICB9XHJcbn07XHJcblxyXG5jb25zdCBmZXRjaEJhdGNoRGV0YWlscyA9IGFzeW5jIChiYXRjaElkKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7QkFUQ0hfRkVUQ0hfRU5EUE9JTlR9LyR7YmF0Y2hJZH1gKTtcclxuICAgIFxyXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBmZXRjaCBiYXRjaCBkZXRhaWxzOiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGEgfTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcign4p2MIEVycm9yIGZldGNoaW5nIGJhdGNoIGRldGFpbHM6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgfVxyXG59O1xyXG5cclxuY29uc3QgY29tYmluZURhdGVUaW1lID0gKGRhdGUsIHRpbWUpID0+IHtcclxuICBpZiAoIWRhdGUgfHwgIXRpbWUpIHJldHVybiBudWxsO1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBkYXRlVGltZVN0ciA9IGAke2RhdGV9VCR7dGltZX06MDBgO1xyXG4gICAgY29uc3QgZGF0ZXRpbWUgPSBuZXcgRGF0ZShkYXRlVGltZVN0cik7XHJcbiAgICBcclxuICAgIGlmIChpc05hTihkYXRldGltZS5nZXRUaW1lKCkpKSByZXR1cm4gbnVsbDtcclxuICAgIFxyXG4gICAgcmV0dXJuIGRhdGV0aW1lLnRvSVNPU3RyaW5nKCk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNvbWJpbmluZyBkYXRldGltZTonLCBlcnJvcik7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbn07XHJcblxyXG5jb25zdCBoYXNTdWJzdGFnZURhdGEgPSAoc3Vic3RhZ2VEYXRhKSA9PiB7XHJcbiAgcmV0dXJuIHN1YnN0YWdlRGF0YS5zdGFydERhdGUgfHwgc3Vic3RhZ2VEYXRhLnN0YXJ0VGltZSB8fCBzdWJzdGFnZURhdGEuZW5kRGF0ZSB8fCBzdWJzdGFnZURhdGEuZW5kVGltZSB8fCBcclxuICAgICAgICAgc3Vic3RhZ2VEYXRhLm1vaXN0dXJlIHx8IHN1YnN0YWdlRGF0YS50ZW1wZXJhdHVyZSB8fCBzdWJzdGFnZURhdGEucmVtYXJrcztcclxufTtcclxuXHJcbmNvbnN0IHZhbGlkYXRlU3RhZ2VTZXF1ZW5jaW5nID0gKGNvbWJpbmVkRGF0YSwgbWF0ZXJpYWxUeXBlLCB0b2FzdCkgPT4ge1xyXG4gIGNvbnN0IHN1YnN0YWdlcyA9IGNvbWJpbmVkRGF0YS5zdWJzdGFnZXM7XHJcbiAgXHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdWJzdGFnZXMubGVuZ3RoIC0gMTsgaSsrKSB7XHJcbiAgICBjb25zdCBjdXJyZW50U3RhZ2UgPSBzdWJzdGFnZXNbaV0ubWF0ZXJpYWxzW21hdGVyaWFsVHlwZV07XHJcbiAgICBjb25zdCBuZXh0U3RhZ2UgPSBzdWJzdGFnZXNbaSArIDFdLm1hdGVyaWFsc1ttYXRlcmlhbFR5cGVdO1xyXG4gICAgXHJcbiAgICBpZiAoIWN1cnJlbnRTdGFnZS5lbmREYXRlIHx8ICFjdXJyZW50U3RhZ2UuZW5kVGltZSB8fCAhbmV4dFN0YWdlLnN0YXJ0RGF0ZSB8fCAhbmV4dFN0YWdlLnN0YXJ0VGltZSkge1xyXG4gICAgICBjb250aW51ZTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc3QgY3VycmVudEVuZCA9IGNvbWJpbmVEYXRlVGltZShjdXJyZW50U3RhZ2UuZW5kRGF0ZSwgY3VycmVudFN0YWdlLmVuZFRpbWUpO1xyXG4gICAgY29uc3QgbmV4dFN0YXJ0ID0gY29tYmluZURhdGVUaW1lKG5leHRTdGFnZS5zdGFydERhdGUsIG5leHRTdGFnZS5zdGFydFRpbWUpO1xyXG4gICAgXHJcbiAgICBpZiAoY3VycmVudEVuZCAmJiBuZXh0U3RhcnQpIHtcclxuICAgICAgaWYgKG5ldyBEYXRlKGN1cnJlbnRFbmQpID4gbmV3IERhdGUobmV4dFN0YXJ0KSkge1xyXG4gICAgICAgIHRvYXN0LmVycm9yKGAke01BVEVSSUFMX0RJU1BMQVlfTkFNRVNbbWF0ZXJpYWxUeXBlXX06ICR7c3Vic3RhZ2VzW2kgKyAxXS5uYW1lfSBtdXN0IHN0YXJ0IGFmdGVyICR7c3Vic3RhZ2VzW2ldLm5hbWV9IGVuZHNgKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIHRydWU7XHJcbn07XHJcblxyXG5jb25zdCBoYXNDb21wbGV0ZU1hdGVyaWFsRGF0YSA9IChjb21iaW5lZERhdGEsIG1hdGVyaWFsVHlwZSkgPT4ge1xyXG4gIGNvbnN0IHN1YnN0YWdlcyA9IGNvbWJpbmVkRGF0YS5zdWJzdGFnZXM7XHJcbiAgXHJcbiAgLy8gQ2hlY2sgaWYgYW55IGRhdGEgZXhpc3RzIGZvciB0aGlzIG1hdGVyaWFsXHJcbiAgY29uc3QgaGFzQW55RGF0YSA9IHN1YnN0YWdlcy5zb21lKHN1YnN0YWdlID0+IHtcclxuICAgIGNvbnN0IG1hdGVyaWFsRGF0YSA9IHN1YnN0YWdlLm1hdGVyaWFsc1ttYXRlcmlhbFR5cGVdO1xyXG4gICAgcmV0dXJuIG1hdGVyaWFsRGF0YS5zdGFydERhdGUgfHwgbWF0ZXJpYWxEYXRhLnN0YXJ0VGltZSB8fCBtYXRlcmlhbERhdGEuZW5kRGF0ZSB8fCBtYXRlcmlhbERhdGEuZW5kVGltZSB8fCBcclxuICAgICAgICAgICBtYXRlcmlhbERhdGEubW9pc3R1cmUgfHwgbWF0ZXJpYWxEYXRhLnRlbXBlcmF0dXJlIHx8IG1hdGVyaWFsRGF0YS5yZW1hcmtzO1xyXG4gIH0pO1xyXG4gIFxyXG4gIGlmICghaGFzQW55RGF0YSkge1xyXG4gICAgY29uc29sZS5sb2coYPCfk50gJHtNQVRFUklBTF9ESVNQTEFZX05BTUVTW21hdGVyaWFsVHlwZV19OiBObyBkYXRhIGVudGVyZWRgKTtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcbiAgXHJcbiAgLy8gQ2hlY2sgZWFjaCBzdWJzdGFnZSBmb3IgY29tcGxldGVuZXNzXHJcbiAgZm9yIChjb25zdCBzdWJzdGFnZSBvZiBzdWJzdGFnZXMpIHtcclxuICAgIGNvbnN0IG1hdGVyaWFsRGF0YSA9IHN1YnN0YWdlLm1hdGVyaWFsc1ttYXRlcmlhbFR5cGVdO1xyXG4gICAgXHJcbiAgICBpZiAobWF0ZXJpYWxEYXRhLnN0YXJ0RGF0ZSAmJiAhbWF0ZXJpYWxEYXRhLnN0YXJ0VGltZSkge1xyXG4gICAgICBjb25zb2xlLmxvZyhg8J+TnSAke01BVEVSSUFMX0RJU1BMQVlfTkFNRVNbbWF0ZXJpYWxUeXBlXX06IEluY29tcGxldGUgc3RhcnQgZGF0YSBpbiAke3N1YnN0YWdlLm5hbWV9IChkYXRlIHdpdGhvdXQgdGltZSlgKTtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpZiAobWF0ZXJpYWxEYXRhLnN0YXJ0VGltZSAmJiAhbWF0ZXJpYWxEYXRhLnN0YXJ0RGF0ZSkge1xyXG4gICAgICBjb25zb2xlLmxvZyhg8J+TnSAke01BVEVSSUFMX0RJU1BMQVlfTkFNRVNbbWF0ZXJpYWxUeXBlXX06IEluY29tcGxldGUgc3RhcnQgZGF0YSBpbiAke3N1YnN0YWdlLm5hbWV9ICh0aW1lIHdpdGhvdXQgZGF0ZSlgKTtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpZiAobWF0ZXJpYWxEYXRhLmVuZERhdGUgJiYgIW1hdGVyaWFsRGF0YS5lbmRUaW1lKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGDwn5OdICR7TUFURVJJQUxfRElTUExBWV9OQU1FU1ttYXRlcmlhbFR5cGVdfTogSW5jb21wbGV0ZSBlbmQgZGF0YSBpbiAke3N1YnN0YWdlLm5hbWV9IChkYXRlIHdpdGhvdXQgdGltZSlgKTtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpZiAobWF0ZXJpYWxEYXRhLmVuZFRpbWUgJiYgIW1hdGVyaWFsRGF0YS5lbmREYXRlKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGDwn5OdICR7TUFURVJJQUxfRElTUExBWV9OQU1FU1ttYXRlcmlhbFR5cGVdfTogSW5jb21wbGV0ZSBlbmQgZGF0YSBpbiAke3N1YnN0YWdlLm5hbWV9ICh0aW1lIHdpdGhvdXQgZGF0ZSlgKTtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICBjb25zb2xlLmxvZyhg4pyFICR7TUFURVJJQUxfRElTUExBWV9OQU1FU1ttYXRlcmlhbFR5cGVdfTogSGFzIHZhbGlkIGRhdGEgdG8gc2F2ZWApO1xyXG4gIHJldHVybiB0cnVlO1xyXG59O1xyXG5cclxuY29uc3QgY29udmVydFRvQXBpUGF5bG9hZCA9IChiYXRjaCwgbWF0ZXJpYWxUeXBlLCBpc0NvbXBsZXRlZCkgPT4ge1xyXG4gIGNvbnN0IHN1YnN0YWdlcyA9IGJhdGNoLmNvbWJpbmVkRGF0YS5zdWJzdGFnZXM7XHJcbiAgY29uc3QgbWF0ZXJpYWxEaXNwbGF5TmFtZSA9IE1BVEVSSUFMX0RJU1BMQVlfTkFNRVNbbWF0ZXJpYWxUeXBlXTtcclxuXHJcbiAgY29uc3QgYnVua2VyMSA9IHN1YnN0YWdlc1swXT8ubWF0ZXJpYWxzW21hdGVyaWFsVHlwZV0gfHwgY3JlYXRlRW1wdHlTdWJzdGFnZShcIkJ1bmtlciBQcm9jZXNzIDFcIik7XHJcbiAgY29uc3QgYnVua2VyMVJlc3QgPSBzdWJzdGFnZXNbMV0/Lm1hdGVyaWFsc1ttYXRlcmlhbFR5cGVdIHx8IGNyZWF0ZUVtcHR5U3Vic3RhZ2UoXCJCdW5rZXIgUHJvY2VzcyAxIFJlc3RcIik7XHJcbiAgY29uc3QgYnVua2VyMiA9IHN1YnN0YWdlc1syXT8ubWF0ZXJpYWxzW21hdGVyaWFsVHlwZV0gfHwgY3JlYXRlRW1wdHlTdWJzdGFnZShcIkJ1bmtlciBQcm9jZXNzIDJcIik7XHJcbiAgY29uc3QgYnVua2VyMlJlc3QgPSBzdWJzdGFnZXNbM10/Lm1hdGVyaWFsc1ttYXRlcmlhbFR5cGVdIHx8IGNyZWF0ZUVtcHR5U3Vic3RhZ2UoXCJCdW5rZXIgUHJvY2VzcyAyIFJlc3RcIik7XHJcbiAgY29uc3QgYnVua2VyMyA9IHN1YnN0YWdlc1s0XT8ubWF0ZXJpYWxzW21hdGVyaWFsVHlwZV0gfHwgY3JlYXRlRW1wdHlTdWJzdGFnZShcIkJ1bmtlciBQcm9jZXNzIDNcIik7XHJcbiAgY29uc3QgYnVua2VyM1Jlc3QgPSBzdWJzdGFnZXNbNV0/Lm1hdGVyaWFsc1ttYXRlcmlhbFR5cGVdIHx8IGNyZWF0ZUVtcHR5U3Vic3RhZ2UoXCJCdW5rZXIgUHJvY2VzcyAzIFJlc3RcIik7XHJcblxyXG4gIC8vIEhlbHBlciBmdW5jdGlvbiB0byBmb3JtYXQgZGF0ZXRpbWUgd2l0aG91dCBtaWxsaXNlY29uZHMgYW5kIHRpbWV6b25lXHJcbiAgY29uc3QgZm9ybWF0RGF0ZVRpbWUgPSAoZGF0ZVRpbWVTdHIpID0+IHtcclxuICAgIGlmICghZGF0ZVRpbWVTdHIpIHJldHVybiBudWxsO1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGRhdGVUaW1lU3RyKTtcclxuICAgICAgaWYgKGlzTmFOKGRhdGUuZ2V0VGltZSgpKSkgcmV0dXJuIG51bGw7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xyXG4gICAgICBjb25zdCBtb250aCA9IFN0cmluZyhkYXRlLmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpO1xyXG4gICAgICBjb25zdCBkYXkgPSBTdHJpbmcoZGF0ZS5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsICcwJyk7XHJcbiAgICAgIGNvbnN0IGhvdXJzID0gU3RyaW5nKGRhdGUuZ2V0SG91cnMoKSkucGFkU3RhcnQoMiwgJzAnKTtcclxuICAgICAgY29uc3QgbWludXRlcyA9IFN0cmluZyhkYXRlLmdldE1pbnV0ZXMoKSkucGFkU3RhcnQoMiwgJzAnKTtcclxuICAgICAgY29uc3Qgc2Vjb25kcyA9IFN0cmluZyhkYXRlLmdldFNlY29uZHMoKSkucGFkU3RhcnQoMiwgJzAnKTtcclxuICAgICAgXHJcbiAgICAgIHJldHVybiBgJHt5ZWFyfS0ke21vbnRofS0ke2RheX1UJHtob3Vyc306JHttaW51dGVzfToke3NlY29uZHN9YDtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZvcm1hdHRpbmcgZGF0ZXRpbWU6JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvLyBPbmx5IGNvbWJpbmUgZGF0ZXMgaWYgYm90aCBkYXRlIGFuZCB0aW1lIGV4aXN0XHJcbiAgY29uc3QgYnVua2VyMV9zdGFydCA9IChidW5rZXIxLnN0YXJ0RGF0ZSAmJiBidW5rZXIxLnN0YXJ0VGltZSkgXHJcbiAgICA/IGNvbWJpbmVEYXRlVGltZShidW5rZXIxLnN0YXJ0RGF0ZSwgYnVua2VyMS5zdGFydFRpbWUpIFxyXG4gICAgOiBudWxsO1xyXG4gIGNvbnN0IGJ1bmtlcjFfZW5kID0gKGJ1bmtlcjEuZW5kRGF0ZSAmJiBidW5rZXIxLmVuZFRpbWUpIFxyXG4gICAgPyBjb21iaW5lRGF0ZVRpbWUoYnVua2VyMS5lbmREYXRlLCBidW5rZXIxLmVuZFRpbWUpIFxyXG4gICAgOiBudWxsO1xyXG4gIFxyXG4gIGNvbnN0IGJ1bmtlcjFfcmVzdF9zdGFydCA9IChidW5rZXIxUmVzdC5zdGFydERhdGUgJiYgYnVua2VyMVJlc3Quc3RhcnRUaW1lKSBcclxuICAgID8gY29tYmluZURhdGVUaW1lKGJ1bmtlcjFSZXN0LnN0YXJ0RGF0ZSwgYnVua2VyMVJlc3Quc3RhcnRUaW1lKSBcclxuICAgIDogbnVsbDtcclxuICBjb25zdCBidW5rZXIxX3Jlc3RfZW5kID0gKGJ1bmtlcjFSZXN0LmVuZERhdGUgJiYgYnVua2VyMVJlc3QuZW5kVGltZSkgXHJcbiAgICA/IGNvbWJpbmVEYXRlVGltZShidW5rZXIxUmVzdC5lbmREYXRlLCBidW5rZXIxUmVzdC5lbmRUaW1lKSBcclxuICAgIDogbnVsbDtcclxuICBcclxuICBjb25zdCBidW5rZXIyX3N0YXJ0ID0gKGJ1bmtlcjIuc3RhcnREYXRlICYmIGJ1bmtlcjIuc3RhcnRUaW1lKSBcclxuICAgID8gY29tYmluZURhdGVUaW1lKGJ1bmtlcjIuc3RhcnREYXRlLCBidW5rZXIyLnN0YXJ0VGltZSkgXHJcbiAgICA6IG51bGw7XHJcbiAgY29uc3QgYnVua2VyMl9lbmQgPSAoYnVua2VyMi5lbmREYXRlICYmIGJ1bmtlcjIuZW5kVGltZSkgXHJcbiAgICA/IGNvbWJpbmVEYXRlVGltZShidW5rZXIyLmVuZERhdGUsIGJ1bmtlcjIuZW5kVGltZSkgXHJcbiAgICA6IG51bGw7XHJcbiAgXHJcbiAgY29uc3QgYnVua2VyMl9yZXN0X3N0YXJ0ID0gKGJ1bmtlcjJSZXN0LnN0YXJ0RGF0ZSAmJiBidW5rZXIyUmVzdC5zdGFydFRpbWUpIFxyXG4gICAgPyBjb21iaW5lRGF0ZVRpbWUoYnVua2VyMlJlc3Quc3RhcnREYXRlLCBidW5rZXIyUmVzdC5zdGFydFRpbWUpIFxyXG4gICAgOiBudWxsO1xyXG4gIGNvbnN0IGJ1bmtlcjJfcmVzdF9lbmQgPSAoYnVua2VyMlJlc3QuZW5kRGF0ZSAmJiBidW5rZXIyUmVzdC5lbmRUaW1lKSBcclxuICAgID8gY29tYmluZURhdGVUaW1lKGJ1bmtlcjJSZXN0LmVuZERhdGUsIGJ1bmtlcjJSZXN0LmVuZFRpbWUpIFxyXG4gICAgOiBudWxsO1xyXG5cclxuICBjb25zdCBidW5rZXIzX3N0YXJ0ID0gKGJ1bmtlcjMuc3RhcnREYXRlICYmIGJ1bmtlcjMuc3RhcnRUaW1lKSBcclxuICAgID8gY29tYmluZURhdGVUaW1lKGJ1bmtlcjMuc3RhcnREYXRlLCBidW5rZXIzLnN0YXJ0VGltZSkgXHJcbiAgICA6IG51bGw7XHJcbiAgY29uc3QgYnVua2VyM19lbmQgPSAoYnVua2VyMy5lbmREYXRlICYmIGJ1bmtlcjMuZW5kVGltZSkgXHJcbiAgICA/IGNvbWJpbmVEYXRlVGltZShidW5rZXIzLmVuZERhdGUsIGJ1bmtlcjMuZW5kVGltZSkgXHJcbiAgICA6IG51bGw7XHJcblxyXG4gIGNvbnN0IGJ1bmtlcjNfcmVzdF9zdGFydCA9IChidW5rZXIzUmVzdC5zdGFydERhdGUgJiYgYnVua2VyM1Jlc3Quc3RhcnRUaW1lKSBcclxuICAgID8gY29tYmluZURhdGVUaW1lKGJ1bmtlcjNSZXN0LnN0YXJ0RGF0ZSwgYnVua2VyM1Jlc3Quc3RhcnRUaW1lKSBcclxuICAgIDogbnVsbDtcclxuICBjb25zdCBidW5rZXIzX3Jlc3RfZW5kID0gKGJ1bmtlcjNSZXN0LmVuZERhdGUgJiYgYnVua2VyM1Jlc3QuZW5kVGltZSkgXHJcbiAgICA/IGNvbWJpbmVEYXRlVGltZShidW5rZXIzUmVzdC5lbmREYXRlLCBidW5rZXIzUmVzdC5lbmRUaW1lKSBcclxuICAgIDogbnVsbDtcclxuXHJcbiAgLy8gRGV0ZXJtaW5lIG92ZXJhbGwgc3RhcnRfdGltZSAoZWFybGllc3Qgc3RhcnQgYWNyb3NzIGFsbCBzdGFnZXMpXHJcbiAgY29uc3QgYWxsU3RhcnRzID0gW1xyXG4gICAgYnVua2VyMV9zdGFydCxcclxuICAgIGJ1bmtlcjFfcmVzdF9zdGFydCxcclxuICAgIGJ1bmtlcjJfc3RhcnQsXHJcbiAgICBidW5rZXIyX3Jlc3Rfc3RhcnQsXHJcbiAgICBidW5rZXIzX3N0YXJ0LFxyXG4gICAgYnVua2VyM19yZXN0X3N0YXJ0XHJcbiAgXS5maWx0ZXIoc3RhcnQgPT4gc3RhcnQgIT09IG51bGwpO1xyXG4gIFxyXG4gIGNvbnN0IG92ZXJhbGxfc3RhcnRfdGltZSA9IGFsbFN0YXJ0cy5sZW5ndGggPiAwIFxyXG4gICAgPyBmb3JtYXREYXRlVGltZShuZXcgRGF0ZShNYXRoLm1pbiguLi5hbGxTdGFydHMubWFwKGQgPT4gbmV3IERhdGUoZCkuZ2V0VGltZSgpKSkpKVxyXG4gICAgOiBudWxsO1xyXG5cclxuICAvLyBGb3JtYXQgYWxsIGRhdGV0aW1lIGZpZWxkc1xyXG4gIGNvbnN0IHBheWxvYWQgPSB7XHJcbiAgICBiYXRjaF9pZDogYmF0Y2guaWQsXHJcbiAgICBzdHJhd190eXBlOiBtYXRlcmlhbFR5cGUsXHJcbiAgICBzdGFydF90aW1lOiBvdmVyYWxsX3N0YXJ0X3RpbWUsXHJcbiAgICBpc2NvbXBsZXRlZDogaXNDb21wbGV0ZWQsXHJcbiAgICBidW5rZXJfcHJvY2VzczE6IHtcclxuICAgICAgc3RhcnRfdGltZTogZm9ybWF0RGF0ZVRpbWUoYnVua2VyMV9zdGFydCksXHJcbiAgICAgIGVuZF90aW1lOiBmb3JtYXREYXRlVGltZShidW5rZXIxX2VuZCksXHJcbiAgICAgIG1vaXN0dXJlOiBidW5rZXIxLm1vaXN0dXJlID8gcGFyc2VJbnQoYnVua2VyMS5tb2lzdHVyZSkgOiBudWxsLFxyXG4gICAgICB0ZW1wZXJhdHVyZTogYnVua2VyMS50ZW1wZXJhdHVyZSA/IHBhcnNlSW50KGJ1bmtlcjEudGVtcGVyYXR1cmUpIDogbnVsbFxyXG4gICAgfSxcclxuICAgIGJ1bmtlcl9wcm9jZXNzMV9yZXN0OiB7XHJcbiAgICAgIHN0YXJ0X3RpbWU6IGZvcm1hdERhdGVUaW1lKGJ1bmtlcjFfcmVzdF9zdGFydCksXHJcbiAgICAgIGVuZF90aW1lOiBmb3JtYXREYXRlVGltZShidW5rZXIxX3Jlc3RfZW5kKSxcclxuICAgICAgbW9pc3R1cmU6IGJ1bmtlcjFSZXN0Lm1vaXN0dXJlID8gcGFyc2VJbnQoYnVua2VyMVJlc3QubW9pc3R1cmUpIDogbnVsbCxcclxuICAgICAgdGVtcGVyYXR1cmU6IGJ1bmtlcjFSZXN0LnRlbXBlcmF0dXJlID8gcGFyc2VJbnQoYnVua2VyMVJlc3QudGVtcGVyYXR1cmUpIDogbnVsbFxyXG4gICAgfSxcclxuICAgIGJ1bmtlcl9wcm9jZXNzMjoge1xyXG4gICAgICBzdGFydF90aW1lOiBmb3JtYXREYXRlVGltZShidW5rZXIyX3N0YXJ0KSxcclxuICAgICAgZW5kX3RpbWU6IGZvcm1hdERhdGVUaW1lKGJ1bmtlcjJfZW5kKSxcclxuICAgICAgbW9pc3R1cmU6IGJ1bmtlcjIubW9pc3R1cmUgPyBwYXJzZUludChidW5rZXIyLm1vaXN0dXJlKSA6IG51bGwsXHJcbiAgICAgIHRlbXBlcmF0dXJlOiBidW5rZXIyLnRlbXBlcmF0dXJlID8gcGFyc2VJbnQoYnVua2VyMi50ZW1wZXJhdHVyZSkgOiBudWxsXHJcbiAgICB9LFxyXG4gICAgYnVua2VyX3Byb2Nlc3MyX3Jlc3Q6IHtcclxuICAgICAgc3RhcnRfdGltZTogZm9ybWF0RGF0ZVRpbWUoYnVua2VyMl9yZXN0X3N0YXJ0KSxcclxuICAgICAgZW5kX3RpbWU6IGZvcm1hdERhdGVUaW1lKGJ1bmtlcjJfcmVzdF9lbmQpLFxyXG4gICAgICBtb2lzdHVyZTogYnVua2VyMlJlc3QubW9pc3R1cmUgPyBwYXJzZUludChidW5rZXIyUmVzdC5tb2lzdHVyZSkgOiBudWxsLFxyXG4gICAgICB0ZW1wZXJhdHVyZTogYnVua2VyMlJlc3QudGVtcGVyYXR1cmUgPyBwYXJzZUludChidW5rZXIyUmVzdC50ZW1wZXJhdHVyZSkgOiBudWxsXHJcbiAgICB9LFxyXG4gICAgYnVua2VyX3Byb2Nlc3MzOiB7XHJcbiAgICAgIHN0YXJ0X3RpbWU6IGZvcm1hdERhdGVUaW1lKGJ1bmtlcjNfc3RhcnQpLFxyXG4gICAgICBlbmRfdGltZTogZm9ybWF0RGF0ZVRpbWUoYnVua2VyM19lbmQpLFxyXG4gICAgICBtb2lzdHVyZTogYnVua2VyMy5tb2lzdHVyZSA/IHBhcnNlSW50KGJ1bmtlcjMubW9pc3R1cmUpIDogbnVsbCxcclxuICAgICAgdGVtcGVyYXR1cmU6IGJ1bmtlcjMudGVtcGVyYXR1cmUgPyBwYXJzZUludChidW5rZXIzLnRlbXBlcmF0dXJlKSA6IG51bGxcclxuICAgIH0sXHJcbiAgICBidW5rZXJfcHJvY2VzczNfcmVzdDoge1xyXG4gICAgICBzdGFydF90aW1lOiBmb3JtYXREYXRlVGltZShidW5rZXIzX3Jlc3Rfc3RhcnQpLFxyXG4gICAgICBlbmRfdGltZTogZm9ybWF0RGF0ZVRpbWUoYnVua2VyM19yZXN0X2VuZCksXHJcbiAgICAgIG1vaXN0dXJlOiBidW5rZXIzUmVzdC5tb2lzdHVyZSA/IHBhcnNlSW50KGJ1bmtlcjNSZXN0Lm1vaXN0dXJlKSA6IG51bGwsXHJcbiAgICAgIHRlbXBlcmF0dXJlOiBidW5rZXIzUmVzdC50ZW1wZXJhdHVyZSA/IHBhcnNlSW50KGJ1bmtlcjNSZXN0LnRlbXBlcmF0dXJlKSA6IG51bGxcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvLyBSZW1vdmUgbnVsbCB2YWx1ZXNcclxuICBPYmplY3Qua2V5cyhwYXlsb2FkKS5mb3JFYWNoKGtleSA9PiB7XHJcbiAgICBpZiAocGF5bG9hZFtrZXldID09PSBudWxsKSB7XHJcbiAgICAgIGRlbGV0ZSBwYXlsb2FkW2tleV07XHJcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBwYXlsb2FkW2tleV0gPT09ICdvYmplY3QnICYmIHBheWxvYWRba2V5XSAhPT0gbnVsbCAmJiBrZXkgIT09ICdiYXRjaF9pZCcgJiYga2V5ICE9PSAnc3RyYXdfdHlwZScgJiYga2V5ICE9PSAnaXNjb21wbGV0ZWQnKSB7XHJcbiAgICAgIE9iamVjdC5rZXlzKHBheWxvYWRba2V5XSkuZm9yRWFjaChzdWJLZXkgPT4ge1xyXG4gICAgICAgIGlmIChwYXlsb2FkW2tleV1bc3ViS2V5XSA9PT0gbnVsbCB8fCBwYXlsb2FkW2tleV1bc3ViS2V5XSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICBkZWxldGUgcGF5bG9hZFtrZXldW3N1YktleV07XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgICAgXHJcbiAgICAgIGlmIChPYmplY3Qua2V5cyhwYXlsb2FkW2tleV0pLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIGRlbGV0ZSBwYXlsb2FkW2tleV07XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgY29uc29sZS5sb2coYPCfk6YgR2VuZXJhdGVkIHBheWxvYWQgZm9yICR7bWF0ZXJpYWxEaXNwbGF5TmFtZX06YCwgcGF5bG9hZCk7XHJcbiAgcmV0dXJuIHBheWxvYWQ7XHJcbn07XHJcblxyXG5jb25zdCBjb252ZXJ0QXBpUmVzcG9uc2VUb1VJID0gKGFwaURhdGEsIGJhdGNoKSA9PiB7XHJcbiAgaWYgKCFhcGlEYXRhIHx8ICFBcnJheS5pc0FycmF5KGFwaURhdGEpKSB7XHJcbiAgICBjb25zb2xlLmxvZygn4p2MIE5vIHZhbGlkIEFQSSBkYXRhIGFycmF5IHRvIGNvbnZlcnQ6JywgYXBpRGF0YSk7XHJcbiAgICByZXR1cm4gYmF0Y2g7XHJcbiAgfVxyXG5cclxuICBjb25zb2xlLmxvZygn8J+UhCBDb252ZXJ0aW5nIEFQSSBkYXRhIHRvIFVJLiBGb3VuZCBpdGVtczonLCBhcGlEYXRhLmxlbmd0aCk7XHJcblxyXG4gIGFwaURhdGEuZm9yRWFjaChtYXRlcmlhbERhdGEgPT4ge1xyXG4gICAgaWYgKCFtYXRlcmlhbERhdGEuc3RyYXdfdHlwZSkgcmV0dXJuO1xyXG5cclxuICAgIGNvbnN0IG1hdGVyaWFsVHlwZSA9IG1hdGVyaWFsRGF0YS5zdHJhd190eXBlO1xyXG4gICAgY29uc29sZS5sb2coYOKchSBGb3VuZCBkYXRhIGZvciAke01BVEVSSUFMX0RJU1BMQVlfTkFNRVNbbWF0ZXJpYWxUeXBlXX06YCwgbWF0ZXJpYWxEYXRhKTtcclxuXHJcbiAgICBjb25zdCBzdWJzdGFnZU1hcHBpbmdzID0gW1xyXG4gICAgICB7IGluZGV4OiAwLCBmaWVsZDogJ2J1bmtlcl9wcm9jZXNzMScgfSxcclxuICAgICAgeyBpbmRleDogMSwgZmllbGQ6ICdidW5rZXJfcHJvY2VzczFfcmVzdCcgfSxcclxuICAgICAgeyBpbmRleDogMiwgZmllbGQ6ICdidW5rZXJfcHJvY2VzczInIH0sXHJcbiAgICAgIHsgaW5kZXg6IDMsIGZpZWxkOiAnYnVua2VyX3Byb2Nlc3MyX3Jlc3QnIH0sXHJcbiAgICAgIHsgaW5kZXg6IDQsIGZpZWxkOiAnYnVua2VyX3Byb2Nlc3MzJyB9LFxyXG4gICAgICB7IGluZGV4OiA1LCBmaWVsZDogJ2J1bmtlcl9wcm9jZXNzM19yZXN0JyB9XHJcbiAgICBdO1xyXG5cclxuICAgIHN1YnN0YWdlTWFwcGluZ3MuZm9yRWFjaCgoeyBpbmRleCwgZmllbGQgfSkgPT4ge1xyXG4gICAgICBjb25zdCBzdGFnZURhdGEgPSBtYXRlcmlhbERhdGFbZmllbGRdO1xyXG4gICAgICBpZiAoc3RhZ2VEYXRhKSB7XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0U3Vic3RhZ2UgPSBiYXRjaC5jb21iaW5lZERhdGEuc3Vic3RhZ2VzW2luZGV4XS5tYXRlcmlhbHNbbWF0ZXJpYWxUeXBlXTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoc3RhZ2VEYXRhLmlkKSB7XHJcbiAgICAgICAgICB0YXJnZXRTdWJzdGFnZS5yZWNvcmRJZCA9IHN0YWdlRGF0YS5pZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHN0YWdlRGF0YS5zdGFydF90aW1lKSB7XHJcbiAgICAgICAgICBjb25zdCB7IGRhdGUsIHRpbWUgfSA9IHBhcnNlRGF0ZVRpbWUoc3RhZ2VEYXRhLnN0YXJ0X3RpbWUpO1xyXG4gICAgICAgICAgdGFyZ2V0U3Vic3RhZ2Uuc3RhcnREYXRlID0gZGF0ZTtcclxuICAgICAgICAgIHRhcmdldFN1YnN0YWdlLnN0YXJ0VGltZSA9IHRpbWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChzdGFnZURhdGEuZW5kX3RpbWUpIHtcclxuICAgICAgICAgIGNvbnN0IHsgZGF0ZSwgdGltZSB9ID0gcGFyc2VEYXRlVGltZShzdGFnZURhdGEuZW5kX3RpbWUpO1xyXG4gICAgICAgICAgdGFyZ2V0U3Vic3RhZ2UuZW5kRGF0ZSA9IGRhdGU7XHJcbiAgICAgICAgICB0YXJnZXRTdWJzdGFnZS5lbmRUaW1lID0gdGltZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHN0YWdlRGF0YS5kdXJhdGlvbl9ob3VycyAhPT0gdW5kZWZpbmVkICYmIHN0YWdlRGF0YS5kdXJhdGlvbl9ob3VycyAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgdGFyZ2V0U3Vic3RhZ2UudG90YWxIb3VycyA9IHN0YWdlRGF0YS5kdXJhdGlvbl9ob3Vycy50b1N0cmluZygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBpZiAoc3RhZ2VEYXRhLm1vaXN0dXJlICE9PSB1bmRlZmluZWQgJiYgc3RhZ2VEYXRhLm1vaXN0dXJlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICB0YXJnZXRTdWJzdGFnZS5tb2lzdHVyZSA9IHN0YWdlRGF0YS5tb2lzdHVyZS50b1N0cmluZygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBpZiAoc3RhZ2VEYXRhLnRlbXBlcmF0dXJlICE9PSB1bmRlZmluZWQgJiYgc3RhZ2VEYXRhLnRlbXBlcmF0dXJlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICB0YXJnZXRTdWJzdGFnZS50ZW1wZXJhdHVyZSA9IHN0YWdlRGF0YS50ZW1wZXJhdHVyZS50b1N0cmluZygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBpZiAoc3RhZ2VEYXRhLnJlbWFya3MpIHtcclxuICAgICAgICAgIHRhcmdldFN1YnN0YWdlLnJlbWFya3MgPSBzdGFnZURhdGEucmVtYXJrcztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBjb25zb2xlLmxvZygn4pyFIEZpbmlzaGVkIGNvbnZlcnRpbmcgQVBJIGRhdGEgdG8gVUknKTtcclxuICByZXR1cm4gYmF0Y2g7XHJcbn07XHJcblxyXG5jb25zdCBzZW5kVG9BcGkgPSBhc3luYyAocGF5bG9hZCwgbWF0ZXJpYWxUeXBlLCBkaXNwbGF5TmFtZSkgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKEFQSV9FTkRQT0lOVCwge1xyXG4gICAgICBtZXRob2Q6ICdQVVQnLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgfSxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocGF5bG9hZClcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnNvbGUubG9nKGDwn5OlIFJFU1BPTlNFIGZvciAke2Rpc3BsYXlOYW1lfTogU3RhdHVzICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xyXG5cclxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpLmNhdGNoKCgpID0+ICh7IGRldGFpbDogJ1Vua25vd24gZXJyb3InIH0pKTtcclxuICAgICAgY29uc29sZS5lcnJvcign4p2MIEFQSSBFcnJvciBSZXNwb25zZTonLCBlcnJvckRhdGEpO1xyXG4gICAgICBcclxuICAgICAgbGV0IGVycm9yTWVzc2FnZSA9IGBBUEkgZXJyb3I6ICR7cmVzcG9uc2Uuc3RhdHVzfWA7XHJcbiAgICAgIGlmIChlcnJvckRhdGEuZGV0YWlsKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBlcnJvckRhdGEuZGV0YWlsID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgZXJyb3JNZXNzYWdlID0gZXJyb3JEYXRhLmRldGFpbDtcclxuICAgICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoZXJyb3JEYXRhLmRldGFpbCkpIHtcclxuICAgICAgICAgIGVycm9yTWVzc2FnZSA9IGVycm9yRGF0YS5kZXRhaWwubWFwKGVyciA9PiBlcnIubXNnKS5qb2luKCcsICcpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGVycm9yRGF0YS5kZXRhaWwgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICBlcnJvck1lc3NhZ2UgPSBKU09OLnN0cmluZ2lmeShlcnJvckRhdGEuZGV0YWlsKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvck1lc3NhZ2UpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgIGNvbnNvbGUubG9nKGDinIUgU1VDQ0VTUyBmb3IgJHtkaXNwbGF5TmFtZX06YCwgcmVzdWx0KTtcclxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHJlc3VsdCwgbWF0ZXJpYWxUeXBlLCBkaXNwbGF5TmFtZSB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKGDinYwgRVJST1Igc2VuZGluZyAke2Rpc3BsYXlOYW1lfSBkYXRhOmAsIGVycm9yKTtcclxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSwgbWF0ZXJpYWxUeXBlLCBkaXNwbGF5TmFtZSB9O1xyXG4gIH1cclxufTtcclxuXHJcbmNvbnN0IENvbWJpbmVkTWF0ZXJpYWxUYWJsZSA9IFJlYWN0Lm1lbW8oKHsgYmF0Y2gsIG9uVXBkYXRlLCByZWFkT25seSA9IGZhbHNlIH0pID0+IHtcclxuICBjb25zdCB0b2FzdCA9IHVzZVRvYXN0KCk7XHJcbiAgY29uc3QgbWF0ZXJpYWxzID0gYmF0Y2gubWF0ZXJpYWxzO1xyXG4gIFxyXG4gIC8vIEdldCBtYXRlcmlhbCB0eXBlcyB0aGF0IGFyZSBwcmVzZW50IGluIHRoZSBiYXRjaFxyXG4gIGNvbnN0IHByZXNlbnRNYXRlcmlhbFR5cGVzID0gbWF0ZXJpYWxzLm1hcChtID0+IE1BVEVSSUFMX1RZUEVTW21dKS5maWx0ZXIoQm9vbGVhbik7XHJcbiAgXHJcbiAgLy8gR2V0IGRpc3BsYXkgbmFtZXMgZm9yIHRoZSBoZWFkZXJcclxuICBjb25zdCBnZXRIZWFkZXJNYXRlcmlhbHMgPSAoKSA9PiB7XHJcbiAgICByZXR1cm4gcHJlc2VudE1hdGVyaWFsVHlwZXMubWFwKHR5cGUgPT4gTUFURVJJQUxfRElTUExBWV9OQU1FU1t0eXBlXSk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgdmFsaWRhdGVEYXRlUmFuZ2UgPSAoc3Vic3RhZ2UsIG1hdGVyaWFsVHlwZSwgZmllbGQsIG5ld1ZhbHVlKSA9PiB7XHJcbiAgICBjb25zdCBtYXRlcmlhbERhdGEgPSBzdWJzdGFnZS5tYXRlcmlhbHNbbWF0ZXJpYWxUeXBlXTtcclxuICAgIFxyXG4gICAgaWYgKGZpZWxkID09PSAnc3RhcnREYXRlJyB8fCBmaWVsZCA9PT0gJ3N0YXJ0VGltZScpIHtcclxuICAgICAgaWYgKG1hdGVyaWFsRGF0YS5lbmREYXRlICYmIG1hdGVyaWFsRGF0YS5lbmRUaW1lKSB7XHJcbiAgICAgICAgY29uc3QgbmV3U3RhcnREYXRlVGltZSA9IGZpZWxkID09PSAnc3RhcnREYXRlJyBcclxuICAgICAgICAgID8gY29tYmluZURhdGVUaW1lKG5ld1ZhbHVlLCBtYXRlcmlhbERhdGEuc3RhcnRUaW1lKVxyXG4gICAgICAgICAgOiBjb21iaW5lRGF0ZVRpbWUobWF0ZXJpYWxEYXRhLnN0YXJ0RGF0ZSwgbmV3VmFsdWUpO1xyXG4gICAgICAgIGNvbnN0IGVuZERhdGVUaW1lID0gY29tYmluZURhdGVUaW1lKG1hdGVyaWFsRGF0YS5lbmREYXRlLCBtYXRlcmlhbERhdGEuZW5kVGltZSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKG5ld1N0YXJ0RGF0ZVRpbWUgJiYgZW5kRGF0ZVRpbWUgJiYgbmV3IERhdGUobmV3U3RhcnREYXRlVGltZSkgPiBuZXcgRGF0ZShlbmREYXRlVGltZSkpIHtcclxuICAgICAgICAgIHRvYXN0LmVycm9yKGAke01BVEVSSUFMX0RJU1BMQVlfTkFNRVNbbWF0ZXJpYWxUeXBlXX0gLSAke3N1YnN0YWdlLm5hbWV9OiBTdGFydCBkYXRlL3RpbWUgY2Fubm90IGJlIGFmdGVyIGVuZCBkYXRlL3RpbWVgKTtcclxuICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAoZmllbGQgPT09ICdlbmREYXRlJyB8fCBmaWVsZCA9PT0gJ2VuZFRpbWUnKSB7XHJcbiAgICAgIGlmIChtYXRlcmlhbERhdGEuc3RhcnREYXRlICYmIG1hdGVyaWFsRGF0YS5zdGFydFRpbWUpIHtcclxuICAgICAgICBjb25zdCBzdGFydERhdGVUaW1lID0gY29tYmluZURhdGVUaW1lKG1hdGVyaWFsRGF0YS5zdGFydERhdGUsIG1hdGVyaWFsRGF0YS5zdGFydFRpbWUpO1xyXG4gICAgICAgIGNvbnN0IG5ld0VuZERhdGVUaW1lID0gZmllbGQgPT09ICdlbmREYXRlJ1xyXG4gICAgICAgICAgPyBjb21iaW5lRGF0ZVRpbWUobmV3VmFsdWUsIG1hdGVyaWFsRGF0YS5lbmRUaW1lKVxyXG4gICAgICAgICAgOiBjb21iaW5lRGF0ZVRpbWUobWF0ZXJpYWxEYXRhLmVuZERhdGUsIG5ld1ZhbHVlKTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoc3RhcnREYXRlVGltZSAmJiBuZXdFbmREYXRlVGltZSAmJiBuZXcgRGF0ZShzdGFydERhdGVUaW1lKSA+IG5ldyBEYXRlKG5ld0VuZERhdGVUaW1lKSkge1xyXG4gICAgICAgICAgdG9hc3QuZXJyb3IoYCR7TUFURVJJQUxfRElTUExBWV9OQU1FU1ttYXRlcmlhbFR5cGVdfSAtICR7c3Vic3RhZ2UubmFtZX06IEVuZCBkYXRlL3RpbWUgY2Fubm90IGJlIGJlZm9yZSBzdGFydCBkYXRlL3RpbWVgKTtcclxuICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IHZhbGlkYXRlU3RhZ2VTZXF1ZW5jZSA9IChzdWJzdGFnZUluZGV4LCBtYXRlcmlhbFR5cGUsIGZpZWxkLCB2YWx1ZSwgdXBkYXRlZEJhdGNoKSA9PiB7XHJcbiAgICBjb25zdCBzdWJzdGFnZSA9IHVwZGF0ZWRCYXRjaC5jb21iaW5lZERhdGEuc3Vic3RhZ2VzW3N1YnN0YWdlSW5kZXhdO1xyXG4gICAgY29uc3QgdGVtcE1hdGVyaWFsRGF0YSA9IHsgLi4uc3Vic3RhZ2UubWF0ZXJpYWxzW21hdGVyaWFsVHlwZV0sIFtmaWVsZF06IHZhbHVlIH07XHJcbiAgICBcclxuICAgIGlmIChzdWJzdGFnZUluZGV4ID4gMCkge1xyXG4gICAgICBjb25zdCBwcmV2U3RhZ2UgPSB1cGRhdGVkQmF0Y2guY29tYmluZWREYXRhLnN1YnN0YWdlc1tzdWJzdGFnZUluZGV4IC0gMV0ubWF0ZXJpYWxzW21hdGVyaWFsVHlwZV07XHJcbiAgICAgIGlmIChwcmV2U3RhZ2UuZW5kRGF0ZSAmJiBwcmV2U3RhZ2UuZW5kVGltZSAmJiB0ZW1wTWF0ZXJpYWxEYXRhLnN0YXJ0RGF0ZSAmJiB0ZW1wTWF0ZXJpYWxEYXRhLnN0YXJ0VGltZSkge1xyXG4gICAgICAgIGNvbnN0IHByZXZFbmQgPSBjb21iaW5lRGF0ZVRpbWUocHJldlN0YWdlLmVuZERhdGUsIHByZXZTdGFnZS5lbmRUaW1lKTtcclxuICAgICAgICBjb25zdCBjdXJyZW50U3RhcnQgPSBjb21iaW5lRGF0ZVRpbWUodGVtcE1hdGVyaWFsRGF0YS5zdGFydERhdGUsIHRlbXBNYXRlcmlhbERhdGEuc3RhcnRUaW1lKTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAocHJldkVuZCAmJiBjdXJyZW50U3RhcnQgJiYgbmV3IERhdGUocHJldkVuZCkgPiBuZXcgRGF0ZShjdXJyZW50U3RhcnQpKSB7XHJcbiAgICAgICAgICB0b2FzdC5lcnJvcihgJHtNQVRFUklBTF9ESVNQTEFZX05BTUVTW21hdGVyaWFsVHlwZV19OiAke3N1YnN0YWdlLm5hbWV9IG11c3Qgc3RhcnQgYWZ0ZXIgJHt1cGRhdGVkQmF0Y2guY29tYmluZWREYXRhLnN1YnN0YWdlc1tzdWJzdGFnZUluZGV4IC0gMV0ubmFtZX0gZW5kc2ApO1xyXG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpZiAoc3Vic3RhZ2VJbmRleCA8IHVwZGF0ZWRCYXRjaC5jb21iaW5lZERhdGEuc3Vic3RhZ2VzLmxlbmd0aCAtIDEpIHtcclxuICAgICAgY29uc3QgbmV4dFN0YWdlID0gdXBkYXRlZEJhdGNoLmNvbWJpbmVkRGF0YS5zdWJzdGFnZXNbc3Vic3RhZ2VJbmRleCArIDFdLm1hdGVyaWFsc1ttYXRlcmlhbFR5cGVdO1xyXG4gICAgICBpZiAodGVtcE1hdGVyaWFsRGF0YS5lbmREYXRlICYmIHRlbXBNYXRlcmlhbERhdGEuZW5kVGltZSAmJiBuZXh0U3RhZ2Uuc3RhcnREYXRlICYmIG5leHRTdGFnZS5zdGFydFRpbWUpIHtcclxuICAgICAgICBjb25zdCBjdXJyZW50RW5kID0gY29tYmluZURhdGVUaW1lKHRlbXBNYXRlcmlhbERhdGEuZW5kRGF0ZSwgdGVtcE1hdGVyaWFsRGF0YS5lbmRUaW1lKTtcclxuICAgICAgICBjb25zdCBuZXh0U3RhcnQgPSBjb21iaW5lRGF0ZVRpbWUobmV4dFN0YWdlLnN0YXJ0RGF0ZSwgbmV4dFN0YWdlLnN0YXJ0VGltZSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGN1cnJlbnRFbmQgJiYgbmV4dFN0YXJ0ICYmIG5ldyBEYXRlKGN1cnJlbnRFbmQpID4gbmV3IERhdGUobmV4dFN0YXJ0KSkge1xyXG4gICAgICAgICAgdG9hc3QuZXJyb3IoYCR7TUFURVJJQUxfRElTUExBWV9OQU1FU1ttYXRlcmlhbFR5cGVdfTogJHt1cGRhdGVkQmF0Y2guY29tYmluZWREYXRhLnN1YnN0YWdlc1tzdWJzdGFnZUluZGV4ICsgMV0ubmFtZX0gbXVzdCBzdGFydCBhZnRlciAke3N1YnN0YWdlLm5hbWV9IGVuZHNgKTtcclxuICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgZ2V0TWluRW5kRGF0ZSA9IChtYXRlcmlhbERhdGEpID0+IHtcclxuICAgIGlmIChtYXRlcmlhbERhdGEuc3RhcnREYXRlKSB7XHJcbiAgICAgIHJldHVybiBtYXRlcmlhbERhdGEuc3RhcnREYXRlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICB9O1xyXG5cclxuICBjb25zdCBnZXRNaW5FbmRUaW1lID0gKG1hdGVyaWFsRGF0YSkgPT4ge1xyXG4gICAgaWYgKG1hdGVyaWFsRGF0YS5zdGFydERhdGUgPT09IG1hdGVyaWFsRGF0YS5lbmREYXRlICYmIG1hdGVyaWFsRGF0YS5zdGFydFRpbWUpIHtcclxuICAgICAgcmV0dXJuIG1hdGVyaWFsRGF0YS5zdGFydFRpbWU7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGhhbmRsZUlucHV0Q2hhbmdlID0gKHN1YnN0YWdlSW5kZXgsIG1hdGVyaWFsVHlwZSwgZmllbGQsIHZhbHVlKSA9PiB7XHJcbiAgICBpZiAocmVhZE9ubHkpIHJldHVybjtcclxuICAgIFxyXG4gICAgY29uc3QgdXBkYXRlZEJhdGNoID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShiYXRjaCkpO1xyXG4gICAgY29uc3Qgc3Vic3RhZ2UgPSB1cGRhdGVkQmF0Y2guY29tYmluZWREYXRhLnN1YnN0YWdlc1tzdWJzdGFnZUluZGV4XTtcclxuICAgIGNvbnN0IG1hdGVyaWFsRGF0YSA9IHN1YnN0YWdlLm1hdGVyaWFsc1ttYXRlcmlhbFR5cGVdO1xyXG4gICAgXHJcbiAgICBpZiAoZmllbGQgPT09ICdzdGFydERhdGUnIHx8IGZpZWxkID09PSAnc3RhcnRUaW1lJyB8fCBmaWVsZCA9PT0gJ2VuZERhdGUnIHx8IGZpZWxkID09PSAnZW5kVGltZScpIHtcclxuICAgICAgaWYgKCF2YWxpZGF0ZURhdGVSYW5nZShzdWJzdGFnZSwgbWF0ZXJpYWxUeXBlLCBmaWVsZCwgdmFsdWUpKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIG1hdGVyaWFsRGF0YVtmaWVsZF0gPSB2YWx1ZTtcclxuICAgIFxyXG4gICAgaWYgKCF2YWxpZGF0ZVN0YWdlU2VxdWVuY2Uoc3Vic3RhZ2VJbmRleCwgbWF0ZXJpYWxUeXBlLCBmaWVsZCwgdmFsdWUsIHVwZGF0ZWRCYXRjaCkpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpZiAobWF0ZXJpYWxEYXRhLnN0YXJ0RGF0ZSAmJiBtYXRlcmlhbERhdGEuc3RhcnRUaW1lICYmIG1hdGVyaWFsRGF0YS5lbmREYXRlICYmIG1hdGVyaWFsRGF0YS5lbmRUaW1lKSB7XHJcbiAgICAgIGNvbnN0IHN0YXJ0RGF0ZVRpbWUgPSBuZXcgRGF0ZShgJHttYXRlcmlhbERhdGEuc3RhcnREYXRlfVQke21hdGVyaWFsRGF0YS5zdGFydFRpbWV9YCk7XHJcbiAgICAgIGNvbnN0IGVuZERhdGVUaW1lID0gbmV3IERhdGUoYCR7bWF0ZXJpYWxEYXRhLmVuZERhdGV9VCR7bWF0ZXJpYWxEYXRhLmVuZFRpbWV9YCk7XHJcbiAgICAgIGNvbnN0IGRpZmZIb3VycyA9IChlbmREYXRlVGltZSAtIHN0YXJ0RGF0ZVRpbWUpIC8gKDEwMDAgKiA2MCAqIDYwKTtcclxuICAgICAgbWF0ZXJpYWxEYXRhLnRvdGFsSG91cnMgPSBkaWZmSG91cnMudG9GaXhlZCgxKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgb25VcGRhdGUodXBkYXRlZEJhdGNoKTtcclxuICB9O1xyXG5cclxuICBjb25zdCBoZWFkZXJNYXRlcmlhbHMgPSBnZXRIZWFkZXJNYXRlcmlhbHMoKTtcclxuICBjb25zdCBtYXRlcmlhbENvdW50ID0gcHJlc2VudE1hdGVyaWFsVHlwZXMubGVuZ3RoO1xyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPGRpdiBjbGFzc05hbWU9XCJ0YWJsZS1zZWN0aW9uXCI+XHJcbiAgICAgIDxoMyBjbGFzc05hbWU9XCJ0YWJsZS10aXRsZVwiPlxyXG4gICAgICAgIEJ1bmtlciBQcm9jZXNzIHttYXRlcmlhbENvdW50ID4gMSA/IGAoJHtoZWFkZXJNYXRlcmlhbHMuam9pbignICsgJyl9KWAgOiBoZWFkZXJNYXRlcmlhbHNbMF19XHJcbiAgICAgIDwvaDM+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZW50cnktdGFibGUtY29udGFpbmVyXCI+XHJcbiAgICAgICAgPHRhYmxlIGNsYXNzTmFtZT1cImVudHJ5LXRhYmxlIHVuaWZpZWQtcGxhdGZvcm0tdGFibGVcIj5cclxuICAgICAgICAgIDx0aGVhZD5cclxuICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgIDx0aCByb3dTcGFuPVwiMlwiPlN1YnN0YWdlPC90aD5cclxuICAgICAgICAgICAgICB7cHJlc2VudE1hdGVyaWFsVHlwZXMubWFwKG1hdGVyaWFsVHlwZSA9PiAoXHJcbiAgICAgICAgICAgICAgICA8UmVhY3QuRnJhZ21lbnQga2V5PXttYXRlcmlhbFR5cGV9PlxyXG4gICAgICAgICAgICAgICAgICA8dGggY29sU3Bhbj1cIjlcIiBjbGFzc05hbWU9XCJtYXRlcmlhbC1oZWFkZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICB7TUFURVJJQUxfRElTUExBWV9OQU1FU1ttYXRlcmlhbFR5cGVdfVxyXG4gICAgICAgICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgICAgICAgPC9SZWFjdC5GcmFnbWVudD5cclxuICAgICAgICAgICAgICApKX1cclxuICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgIHtwcmVzZW50TWF0ZXJpYWxUeXBlcy5tYXAobWF0ZXJpYWxUeXBlID0+IChcclxuICAgICAgICAgICAgICAgIDxSZWFjdC5GcmFnbWVudCBrZXk9e2Ake21hdGVyaWFsVHlwZX0taGVhZGVyc2B9PlxyXG4gICAgICAgICAgICAgICAgICA8dGggY29sU3Bhbj1cIjJcIj5TdGFydDwvdGg+XHJcbiAgICAgICAgICAgICAgICAgIDx0aCBjb2xTcGFuPVwiMlwiPkVuZDwvdGg+XHJcbiAgICAgICAgICAgICAgICAgIDx0aD5Ib3VyczwvdGg+XHJcbiAgICAgICAgICAgICAgICAgIDx0aD5Nb2lzdHVyZSAoJSk8L3RoPlxyXG4gICAgICAgICAgICAgICAgICA8dGg+VGVtcCAowrBDKTwvdGg+XHJcbiAgICAgICAgICAgICAgICAgIDx0aCBjb2xTcGFuPVwiMlwiPlJlbWFya3M8L3RoPlxyXG4gICAgICAgICAgICAgICAgPC9SZWFjdC5GcmFnbWVudD5cclxuICAgICAgICAgICAgICApKX1cclxuICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgIHtwcmVzZW50TWF0ZXJpYWxUeXBlcy5tYXAobWF0ZXJpYWxUeXBlID0+IChcclxuICAgICAgICAgICAgICAgIDxSZWFjdC5GcmFnbWVudCBrZXk9e2Ake21hdGVyaWFsVHlwZX0tc3ViaGVhZGVyc2B9PlxyXG4gICAgICAgICAgICAgICAgICA8dGg+RGF0ZTwvdGg+XHJcbiAgICAgICAgICAgICAgICAgIDx0aD5UaW1lPC90aD5cclxuICAgICAgICAgICAgICAgICAgPHRoPkRhdGU8L3RoPlxyXG4gICAgICAgICAgICAgICAgICA8dGg+VGltZTwvdGg+XHJcbiAgICAgICAgICAgICAgICAgIDx0aD48L3RoPlxyXG4gICAgICAgICAgICAgICAgICA8dGg+PC90aD5cclxuICAgICAgICAgICAgICAgICAgPHRoPjwvdGg+XHJcbiAgICAgICAgICAgICAgICAgIDx0aCBjb2xTcGFuPVwiMlwiPjwvdGg+XHJcbiAgICAgICAgICAgICAgICA8L1JlYWN0LkZyYWdtZW50PlxyXG4gICAgICAgICAgICAgICkpfVxyXG4gICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgPC90aGVhZD5cclxuICAgICAgICAgIDx0Ym9keT5cclxuICAgICAgICAgICAge2JhdGNoLmNvbWJpbmVkRGF0YS5zdWJzdGFnZXMubWFwKChzdWJzdGFnZSwgc3Vic3RhZ2VJbmRleCkgPT4gKFxyXG4gICAgICAgICAgICAgIDx0ciBrZXk9e3N1YnN0YWdlSW5kZXh9PlxyXG4gICAgICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT1cInN1YnN0YWdlLW5hbWVcIj57c3Vic3RhZ2UubmFtZX08L3RkPlxyXG4gICAgICAgICAgICAgICAge3ByZXNlbnRNYXRlcmlhbFR5cGVzLm1hcChtYXRlcmlhbFR5cGUgPT4ge1xyXG4gICAgICAgICAgICAgICAgICBjb25zdCBtYXRlcmlhbERhdGEgPSBzdWJzdGFnZS5tYXRlcmlhbHNbbWF0ZXJpYWxUeXBlXTtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgICAgICA8UmVhY3QuRnJhZ21lbnQga2V5PXtgJHtzdWJzdGFnZUluZGV4fS0ke21hdGVyaWFsVHlwZX1gfT5cclxuICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cImRhdGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXttYXRlcmlhbERhdGEuc3RhcnREYXRlIHx8ICcnfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gaGFuZGxlSW5wdXRDaGFuZ2Uoc3Vic3RhZ2VJbmRleCwgbWF0ZXJpYWxUeXBlLCAnc3RhcnREYXRlJywgZS50YXJnZXQudmFsdWUpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInRhYmxlLWlucHV0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17cmVhZE9ubHl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4PXttYXRlcmlhbERhdGEuZW5kRGF0ZSB8fCB1bmRlZmluZWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwidGltZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e21hdGVyaWFsRGF0YS5zdGFydFRpbWUgfHwgJyd9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBoYW5kbGVJbnB1dENoYW5nZShzdWJzdGFnZUluZGV4LCBtYXRlcmlhbFR5cGUsICdzdGFydFRpbWUnLCBlLnRhcmdldC52YWx1ZSl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidGFibGUtaW5wdXRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtyZWFkT25seX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBtYXg9e21hdGVyaWFsRGF0YS5zdGFydERhdGUgPT09IG1hdGVyaWFsRGF0YS5lbmREYXRlID8gbWF0ZXJpYWxEYXRhLmVuZFRpbWUgOiB1bmRlZmluZWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwiZGF0ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e21hdGVyaWFsRGF0YS5lbmREYXRlIHx8ICcnfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gaGFuZGxlSW5wdXRDaGFuZ2Uoc3Vic3RhZ2VJbmRleCwgbWF0ZXJpYWxUeXBlLCAnZW5kRGF0ZScsIGUudGFyZ2V0LnZhbHVlKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0YWJsZS1pbnB1dFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e3JlYWRPbmx5fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG1pbj17Z2V0TWluRW5kRGF0ZShtYXRlcmlhbERhdGEpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRpbWVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXttYXRlcmlhbERhdGEuZW5kVGltZSB8fCAnJ31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IGhhbmRsZUlucHV0Q2hhbmdlKHN1YnN0YWdlSW5kZXgsIG1hdGVyaWFsVHlwZSwgJ2VuZFRpbWUnLCBlLnRhcmdldC52YWx1ZSl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidGFibGUtaW5wdXRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtyZWFkT25seX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBtaW49e2dldE1pbkVuZFRpbWUobWF0ZXJpYWxEYXRhKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8dGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17bWF0ZXJpYWxEYXRhLnRvdGFsSG91cnMgfHwgJyd9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZE9ubHlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0YWJsZS1pbnB1dCBob3Vycy1pbnB1dFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJBdXRvXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8dGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJudW1iZXJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXttYXRlcmlhbERhdGEubW9pc3R1cmUgfHwgJyd9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBoYW5kbGVJbnB1dENoYW5nZShzdWJzdGFnZUluZGV4LCBtYXRlcmlhbFR5cGUsICdtb2lzdHVyZScsIGUudGFyZ2V0LnZhbHVlKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0YWJsZS1pbnB1dCBtb2lzdHVyZS1pbnB1dFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCIlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBtaW49XCIwXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBtYXg9XCIxMDBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHN0ZXA9XCIwLjFcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtyZWFkT25seX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8dGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJudW1iZXJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXttYXRlcmlhbERhdGEudGVtcGVyYXR1cmUgfHwgJyd9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBoYW5kbGVJbnB1dENoYW5nZShzdWJzdGFnZUluZGV4LCBtYXRlcmlhbFR5cGUsICd0ZW1wZXJhdHVyZScsIGUudGFyZ2V0LnZhbHVlKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0YWJsZS1pbnB1dCB0ZW1wZXJhdHVyZS1pbnB1dFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCLCsENcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG1pbj1cIjBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG1heD1cIjEwMFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc3RlcD1cIjAuMVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e3JlYWRPbmx5fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjb2xTcGFuPXsyfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXttYXRlcmlhbERhdGEucmVtYXJrcyB8fCAnJ31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IGhhbmRsZUlucHV0Q2hhbmdlKHN1YnN0YWdlSW5kZXgsIG1hdGVyaWFsVHlwZSwgJ3JlbWFya3MnLCBlLnRhcmdldC52YWx1ZSl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidGFibGUtaW5wdXQgcmVtYXJrcy1pbnB1dFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJBZGQgcmVtYXJrcy4uLlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e3JlYWRPbmx5fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICA8L1JlYWN0LkZyYWdtZW50PlxyXG4gICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfSl9XHJcbiAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgKSl9XHJcbiAgICAgICAgICA8L3Rib2R5PlxyXG4gICAgICAgIDwvdGFibGU+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbiAgKTtcclxufSk7XHJcblxyXG5Db21iaW5lZE1hdGVyaWFsVGFibGUuZGlzcGxheU5hbWUgPSAnQ29tYmluZWRNYXRlcmlhbFRhYmxlJztcclxuXHJcbmZ1bmN0aW9uIEJhdGNoU2VsZWN0aW9uKHsgb25TZWxlY3RCYXRjaCwgbG9hZGluZywgZXJyb3IsIGluaXRpYWxCYXRjaE51bWJlciwgaW5pdGlhbEJhdGNoSWQgfSkge1xyXG4gIGNvbnN0IFtiYXRjaE51bWJlciwgc2V0QmF0Y2hOdW1iZXJdID0gdXNlU3RhdGUoaW5pdGlhbEJhdGNoTnVtYmVyIHx8ICcnKTtcclxuICBjb25zdCBbaXNMb2FkaW5nLCBzZXRJc0xvYWRpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xyXG4gIGNvbnN0IHRvYXN0ID0gdXNlVG9hc3QoKTtcclxuICBjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKTtcclxuICBjb25zdCBzZWFyY2hQYXJhbXMgPSB1c2VTZWFyY2hQYXJhbXMoKTtcclxuICBjb25zdCBoYXNMb2FkZWRSZWYgPSB1c2VSZWYoZmFsc2UpO1xyXG5cclxuICAvLyBBdXRvLWxvYWQgYmF0Y2ggaWYgaW5pdGlhbEJhdGNoTnVtYmVyIGlzIHByb3ZpZGVkXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGlmIChpbml0aWFsQmF0Y2hOdW1iZXIgJiYgIWhhc0xvYWRlZFJlZi5jdXJyZW50ICYmICFsb2FkaW5nKSB7XHJcbiAgICAgIHNldEJhdGNoTnVtYmVyKGluaXRpYWxCYXRjaE51bWJlcik7XHJcbiAgICAgIGhhbmRsZUxvYWRCYXRjaChpbml0aWFsQmF0Y2hOdW1iZXIsIGluaXRpYWxCYXRjaElkKTtcclxuICAgICAgaGFzTG9hZGVkUmVmLmN1cnJlbnQgPSB0cnVlO1xyXG4gICAgfVxyXG4gIH0sIFtpbml0aWFsQmF0Y2hOdW1iZXIsIGluaXRpYWxCYXRjaElkLCBsb2FkaW5nXSk7XHJcblxyXG4gIGNvbnN0IGdldE1hdGVyaWFsc0Zyb21CYXRjaCA9IChiYXRjaERhdGEpID0+IHtcclxuICAgIGNvbnN0IG1hdGVyaWFscyA9IG5ldyBTZXQoKTtcclxuICAgIFxyXG4gICAgaWYgKGJhdGNoRGF0YSAmJiBiYXRjaERhdGEuZm9ybXVsYXRpb25fZW50cmllcykge1xyXG4gICAgICBiYXRjaERhdGEuZm9ybXVsYXRpb25fZW50cmllcy5mb3JFYWNoKGVudHJ5ID0+IHtcclxuICAgICAgICBjb25zdCBtYXRlcmlhbE5hbWUgPSBlbnRyeS5uYW1lLnRvVXBwZXJDYXNlKCk7XHJcbiAgICAgICAgaWYgKE1BVEVSSUFMX1RZUEVTW21hdGVyaWFsTmFtZV0gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgbWF0ZXJpYWxzLmFkZChtYXRlcmlhbE5hbWUpO1xyXG4gICAgICAgICAgY29uc29sZS5sb2coYPCfk4wgRm91bmQgbWF0ZXJpYWw6ICR7bWF0ZXJpYWxOYW1lfSAtPiAke01BVEVSSUFMX1RZUEVTW21hdGVyaWFsTmFtZV19YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcmV0dXJuIEFycmF5LmZyb20obWF0ZXJpYWxzKTtcclxuICB9O1xyXG5cclxuICBjb25zdCBoYW5kbGVMb2FkQmF0Y2ggPSBhc3luYyAoYmF0Y2hOdW0sIGJhdGNoSWQpID0+IHtcclxuICAgIGlmICghYmF0Y2hOdW0udHJpbSgpKSB7XHJcbiAgICAgIHRvYXN0LmVycm9yKCdQbGVhc2UgZW50ZXIgYSBiYXRjaCBudW1iZXInKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHNldElzTG9hZGluZyh0cnVlKTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zb2xlLmxvZyhg8J+UjSBGZXRjaGluZyBiYXRjaCBkZXRhaWxzIGZvcjogJHtiYXRjaE51bX0gd2l0aCBJRDogJHtiYXRjaElkIHx8ICd1bmtub3duJ31gKTtcclxuICAgICAgXHJcbiAgICAgIGxldCBzZWxlY3RlZEJhdGNoID0gbnVsbDtcclxuICAgICAgbGV0IGJhdGNoSWRUb1VzZSA9IGJhdGNoSWQ7XHJcbiAgICAgIFxyXG4gICAgICAvLyBJZiBiYXRjaElkIGlzIHByb3ZpZGVkLCB3ZSBjYW4gdXNlIGl0IGRpcmVjdGx5XHJcbiAgICAgIGlmIChiYXRjaElkVG9Vc2UpIHtcclxuICAgICAgICAvLyBUcnkgdG8gZmV0Y2ggYmF0Y2ggZGV0YWlscyB1c2luZyBJRFxyXG4gICAgICAgIGNvbnN0IGJhdGNoUmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHtCQVRDSF9GRVRDSF9FTkRQT0lOVH0vJHtiYXRjaElkVG9Vc2V9YCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGJhdGNoUmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgIGNvbnN0IGJhdGNoUmVzdWx0ID0gYXdhaXQgYmF0Y2hSZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgICBzZWxlY3RlZEJhdGNoID0gYmF0Y2hSZXN1bHQuZGF0YSB8fCBiYXRjaFJlc3VsdDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgLy8gRmFsbGJhY2sgdG8gZmV0Y2hpbmcgYWxsIGJhdGNoZXNcclxuICAgICAgICAgIGNvbnN0IGFsbEJhdGNoZXNSZXNwb25zZSA9IGF3YWl0IGZldGNoKEJBVENIX0ZFVENIX0VORFBPSU5UKTtcclxuICAgICAgICAgIGlmIChhbGxCYXRjaGVzUmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgY29uc3QgYWxsQmF0Y2hlc1Jlc3VsdCA9IGF3YWl0IGFsbEJhdGNoZXNSZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgICAgIGxldCBiYXRjaGVzID0gW107XHJcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGFsbEJhdGNoZXNSZXN1bHQpKSB7XHJcbiAgICAgICAgICAgICAgYmF0Y2hlcyA9IGFsbEJhdGNoZXNSZXN1bHQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYWxsQmF0Y2hlc1Jlc3VsdC5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgYmF0Y2hlcyA9IGFsbEJhdGNoZXNSZXN1bHQuZGF0YTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZWxlY3RlZEJhdGNoID0gYmF0Y2hlcy5maW5kKGIgPT4gYi5pZCA9PT0gYmF0Y2hJZFRvVXNlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gTm8gYmF0Y2hJZCBwcm92aWRlZCwgZmV0Y2ggYnkgYmF0Y2ggbnVtYmVyXHJcbiAgICAgICAgY29uc3QgYmF0Y2hSZXNwb25zZSA9IGF3YWl0IGZldGNoKEJBVENIX0ZFVENIX0VORFBPSU5UKTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoIWJhdGNoUmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGZldGNoIGJhdGNoZXMnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgYmF0Y2hSZXN1bHQgPSBhd2FpdCBiYXRjaFJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgICBcclxuICAgICAgICBsZXQgYmF0Y2hlcyA9IFtdO1xyXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGJhdGNoUmVzdWx0KSkge1xyXG4gICAgICAgICAgYmF0Y2hlcyA9IGJhdGNoUmVzdWx0O1xyXG4gICAgICAgIH0gZWxzZSBpZiAoYmF0Y2hSZXN1bHQuc3VjY2Vzcykge1xyXG4gICAgICAgICAgYmF0Y2hlcyA9IGJhdGNoUmVzdWx0LmRhdGE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzZWxlY3RlZEJhdGNoID0gYmF0Y2hlcy5maW5kKGIgPT4gYi5iYXRjaF9udW1iZXIgPT09IGJhdGNoTnVtLnRyaW0oKSk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGlmICghc2VsZWN0ZWRCYXRjaCkge1xyXG4gICAgICAgIHRvYXN0LmVycm9yKCdCYXRjaCBudW1iZXIgbm90IGZvdW5kJyk7XHJcbiAgICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnNvbGUubG9nKCfinIUgRm91bmQgYmF0Y2g6Jywgc2VsZWN0ZWRCYXRjaCk7XHJcblxyXG4gICAgICBjb25zdCBtYXRlcmlhbHMgPSBnZXRNYXRlcmlhbHNGcm9tQmF0Y2goc2VsZWN0ZWRCYXRjaCk7XHJcblxyXG4gICAgICBpZiAobWF0ZXJpYWxzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHRvYXN0LmVycm9yKCdObyBzdWl0YWJsZSBtYXRlcmlhbHMgKEJhZ2Fzc2UsIFdoZWF0IFN0cmF3LCBvciBQYWRkeSBTdHJhdykgZm91bmQgaW4gdGhpcyBiYXRjaCcpO1xyXG4gICAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zb2xlLmxvZyhg8J+TiyBNYXRlcmlhbHMgdG8gcHJvY2VzczpgLCBtYXRlcmlhbHMpO1xyXG5cclxuICAgICAgY29uc3QgbmV3QmF0Y2ggPSBjcmVhdGVFbXB0eUJhdGNoKGJhdGNoTnVtLCBtYXRlcmlhbHMsIHNlbGVjdGVkQmF0Y2guaWQpO1xyXG4gICAgICBuZXdCYXRjaC5iYXRjaERhdGEgPSBzZWxlY3RlZEJhdGNoO1xyXG5cclxuICAgICAgY29uc29sZS5sb2coJ/Cfk4ogRmV0Y2hpbmcgYnVua2VyIGRhdGEgZm9yIGJhdGNoIElEOicsIHNlbGVjdGVkQmF0Y2guaWQpO1xyXG4gICAgICBjb25zdCBzdHJhd0RhdGFSZXN1bHQgPSBhd2FpdCBmZXRjaEJhdGNoRGF0YShzZWxlY3RlZEJhdGNoLmlkKTtcclxuICAgICAgXHJcbiAgICAgIGlmIChzdHJhd0RhdGFSZXN1bHQuc3VjY2VzcyAmJiBzdHJhd0RhdGFSZXN1bHQuZGF0YSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5OmIFJhdyBBUEkgZGF0YTonLCBzdHJhd0RhdGFSZXN1bHQuZGF0YSk7XHJcbiAgICAgICAgY29uc3QgcG9wdWxhdGVkQmF0Y2ggPSBjb252ZXJ0QXBpUmVzcG9uc2VUb1VJKHN0cmF3RGF0YVJlc3VsdC5kYXRhLCBuZXdCYXRjaCk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ+KchSBQb3B1bGF0ZWQgYmF0Y2g6JywgcG9wdWxhdGVkQmF0Y2gpO1xyXG4gICAgICAgIG9uU2VsZWN0QmF0Y2gocG9wdWxhdGVkQmF0Y2gpO1xyXG4gICAgICAgIHRvYXN0LnN1Y2Nlc3MoYExvYWRlZCBiYXRjaCAke2JhdGNoTnVtfSB3aXRoIGV4aXN0aW5nIGRhdGEgKCR7bWF0ZXJpYWxzLmxlbmd0aH0gbWF0ZXJpYWwke21hdGVyaWFscy5sZW5ndGggPiAxID8gJ3MnIDogJyd9KWApO1xyXG4gICAgICB9IGVsc2UgaWYgKHN0cmF3RGF0YVJlc3VsdC5zdWNjZXNzICYmICFzdHJhd0RhdGFSZXN1bHQuZGF0YSkge1xyXG4gICAgICAgIG9uU2VsZWN0QmF0Y2gobmV3QmF0Y2gpO1xyXG4gICAgICAgIHRvYXN0LnN1Y2Nlc3MoYExvYWRlZCBiYXRjaCAke2JhdGNoTnVtfSAoJHttYXRlcmlhbHMubGVuZ3RofSBtYXRlcmlhbCR7bWF0ZXJpYWxzLmxlbmd0aCA+IDEgPyAncycgOiAnJ30gLSBubyBleGlzdGluZyBkYXRhKWApO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRvYXN0Lndhcm5pbmcoYExvYWRlZCBiYXRjaCAke2JhdGNoTnVtfSBidXQgZmFpbGVkIHRvIGZldGNoIGV4aXN0aW5nIGRhdGFgKTtcclxuICAgICAgICBvblNlbGVjdEJhdGNoKG5ld0JhdGNoKTtcclxuICAgICAgfVxyXG5cclxuICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgRXJyb3IgbG9hZGluZyBiYXRjaDonLCBlcnIpO1xyXG4gICAgICB0b2FzdC5lcnJvcignRXJyb3IgbG9hZGluZyBiYXRjaCBkZXRhaWxzLiBQbGVhc2UgdHJ5IGFnYWluLicpO1xyXG4gICAgfSBmaW5hbGx5IHtcclxuICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCBoYW5kbGVDcmVhdGVOZXcgPSAoKSA9PiB7XHJcbiAgICBpZiAoaXNMb2FkaW5nIHx8IGxvYWRpbmcpIHJldHVybjtcclxuICAgIGhhbmRsZUxvYWRCYXRjaChiYXRjaE51bWJlcik7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgaGFuZGxlQmFja0NsaWNrID0gKCkgPT4ge1xyXG4gICAgLy8gQ2xlYXIgdGhlIFVSTCBwYXJhbXMgd2hlbiBnb2luZyBiYWNrXHJcbiAgICByb3V0ZXIucHVzaCgnL2J1bmtlci1tYW5hZ2VtZW50Jyk7XHJcbiAgICAvLyBDbGVhciB0aGUgYmF0Y2ggbnVtYmVyIGFuZCBhbGxvdyBuZXcgaW5wdXRcclxuICAgIHNldEJhdGNoTnVtYmVyKCcnKTtcclxuICAgIGhhc0xvYWRlZFJlZi5jdXJyZW50ID0gZmFsc2U7XHJcbiAgfTtcclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxkaXYgY2xhc3NOYW1lPVwiYmF0Y2gtc2VsZWN0aW9uXCI+XHJcbiAgICAgIDxoMj5CdW5rZXIgTWFuYWdlbWVudCBQcm9jZXNzIEVudHJ5PC9oMj5cclxuICAgICAgXHJcbiAgICAgIHtlcnJvciAmJiAoXHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJlcnJvci1tZXNzYWdlXCI+XHJcbiAgICAgICAgICBFcnJvcjoge2Vycm9yfVxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICApfVxyXG4gICAgICBcclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJzZWxlY3Rpb24tcGFuZWxcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm5ldy1iYXRjaC1zZWN0aW9uXCI+XHJcbiAgICAgICAgICA8aDM+RW50ZXIgQmF0Y2ggTnVtYmVyPC9oMz5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmF0Y2gtaW5wdXQtZ3JvdXBcIj5cclxuICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxyXG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiRW50ZXIgQmF0Y2ggTnVtYmVyIChlLmcuLCBCQVRDSC0wMDEpXCJcclxuICAgICAgICAgICAgICB2YWx1ZT17YmF0Y2hOdW1iZXJ9XHJcbiAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRCYXRjaE51bWJlcihlLnRhcmdldC52YWx1ZSl9XHJcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYmF0Y2gtaW5wdXRcIlxyXG4gICAgICAgICAgICAgIGRpc2FibGVkPXtpc0xvYWRpbmcgfHwgbG9hZGluZ31cclxuICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgPGJ1dHRvbiBcclxuICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVDcmVhdGVOZXd9IFxyXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ0bi1wcmltYXJ5XCJcclxuICAgICAgICAgICAgICBkaXNhYmxlZD17aXNMb2FkaW5nIHx8IGxvYWRpbmd9XHJcbiAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICB7aXNMb2FkaW5nIHx8IGxvYWRpbmcgPyAnTG9hZGluZy4uLicgOiAnTG9hZCBCYXRjaCd9XHJcbiAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbiAgKTtcclxufVxyXG5cclxuZnVuY3Rpb24gQnVua2VyTWFuYWdlbWVudENvbnRlbnQoKSB7XHJcbiAgY29uc3Qgcm91dGVyID0gdXNlUm91dGVyKCk7XHJcbiAgY29uc3QgdG9hc3QgPSB1c2VUb2FzdCgpO1xyXG4gIGNvbnN0IHNlYXJjaFBhcmFtcyA9IHVzZVNlYXJjaFBhcmFtcygpO1xyXG4gIGNvbnN0IFtjdXJyZW50QmF0Y2gsIHNldEN1cnJlbnRCYXRjaF0gPSB1c2VTdGF0ZShudWxsKTtcclxuICBjb25zdCBbc2F2ZWRCYXRjaGVzLCBzZXRTYXZlZEJhdGNoZXNdID0gdXNlU3RhdGUoW10pO1xyXG4gIGNvbnN0IFtsb2FkaW5nLCBzZXRMb2FkaW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcclxuICBjb25zdCBbZXJyb3IsIHNldEVycm9yXSA9IHVzZVN0YXRlKG51bGwpO1xyXG4gIGNvbnN0IFtpbml0aWFsQmF0Y2hOdW1iZXIsIHNldEluaXRpYWxCYXRjaE51bWJlcl0gPSB1c2VTdGF0ZShudWxsKTtcclxuICBjb25zdCBbaW5pdGlhbEJhdGNoSWQsIHNldEluaXRpYWxCYXRjaElkXSA9IHVzZVN0YXRlKG51bGwpO1xyXG4gIGNvbnN0IGlzU2F2aW5nUmVmID0gdXNlUmVmKGZhbHNlKTtcclxuXHJcbiAgLy8gR2V0IGJhdGNoIG51bWJlciBhbmQgSUQgZnJvbSBVUkwgcGFyYW1zXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGNvbnN0IGJhdGNoTnVtID0gc2VhcmNoUGFyYW1zLmdldCgnYmF0Y2gnKTtcclxuICAgIGNvbnN0IGJhdGNoSWQgPSBzZWFyY2hQYXJhbXMuZ2V0KCdiYXRjaElkJyk7XHJcbiAgICBcclxuICAgIGlmIChiYXRjaE51bSkge1xyXG4gICAgICBzZXRJbml0aWFsQmF0Y2hOdW1iZXIoYmF0Y2hOdW0pO1xyXG4gICAgICBzZXRJbml0aWFsQmF0Y2hJZChiYXRjaElkKTtcclxuICAgIH1cclxuICB9LCBbc2VhcmNoUGFyYW1zXSk7XHJcblxyXG4gIGNvbnN0IGhhbmRsZVNlbGVjdEJhdGNoID0gKGJhdGNoKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZygn4pyFIFNldHRpbmcgY3VycmVudCBiYXRjaDonLCBiYXRjaCk7XHJcbiAgICBzZXRDdXJyZW50QmF0Y2goYmF0Y2gpO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGhhbmRsZVVwZGF0ZUJhdGNoID0gdXNlQ2FsbGJhY2soKHVwZGF0ZWRCYXRjaCkgPT4ge1xyXG4gICAgc2V0Q3VycmVudEJhdGNoKHVwZGF0ZWRCYXRjaCk7XHJcbiAgfSwgW10pO1xyXG5cclxuICBjb25zdCB2YWxpZGF0ZUJhdGNoRGF0YSA9IChiYXRjaCkgPT4ge1xyXG4gICAgY29uc3QgbWF0ZXJpYWxUeXBlcyA9IGJhdGNoLm1hdGVyaWFscy5tYXAobSA9PiBNQVRFUklBTF9UWVBFU1ttXSk7XHJcbiAgICBcclxuICAgIGZvciAoY29uc3QgbWF0ZXJpYWxUeXBlIG9mIG1hdGVyaWFsVHlwZXMpIHtcclxuICAgICAgLy8gVmFsaWRhdGUgZWFjaCBtYXRlcmlhbCdzIGRhdGFcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBiYXRjaC5jb21iaW5lZERhdGEuc3Vic3RhZ2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY29uc3Qgc3Vic3RhZ2UgPSBiYXRjaC5jb21iaW5lZERhdGEuc3Vic3RhZ2VzW2ldO1xyXG4gICAgICAgIGNvbnN0IG1hdGVyaWFsRGF0YSA9IHN1YnN0YWdlLm1hdGVyaWFsc1ttYXRlcmlhbFR5cGVdO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChtYXRlcmlhbERhdGEuc3RhcnREYXRlICYmIG1hdGVyaWFsRGF0YS5zdGFydFRpbWUgJiYgbWF0ZXJpYWxEYXRhLmVuZERhdGUgJiYgbWF0ZXJpYWxEYXRhLmVuZFRpbWUpIHtcclxuICAgICAgICAgIGNvbnN0IHN0YXJ0RGF0ZVRpbWUgPSBuZXcgRGF0ZShgJHttYXRlcmlhbERhdGEuc3RhcnREYXRlfVQke21hdGVyaWFsRGF0YS5zdGFydFRpbWV9YCk7XHJcbiAgICAgICAgICBjb25zdCBlbmREYXRlVGltZSA9IG5ldyBEYXRlKGAke21hdGVyaWFsRGF0YS5lbmREYXRlfVQke21hdGVyaWFsRGF0YS5lbmRUaW1lfWApO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBpZiAoc3RhcnREYXRlVGltZSA+IGVuZERhdGVUaW1lKSB7XHJcbiAgICAgICAgICAgIHRvYXN0LmVycm9yKGAke01BVEVSSUFMX0RJU1BMQVlfTkFNRVNbbWF0ZXJpYWxUeXBlXX0gLSAke3N1YnN0YWdlLm5hbWV9OiBFbmQgZGF0ZS90aW1lIGNhbm5vdCBiZSBiZWZvcmUgc3RhcnQgZGF0ZS90aW1lYCk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKChtYXRlcmlhbERhdGEuc3RhcnREYXRlIHx8IG1hdGVyaWFsRGF0YS5zdGFydFRpbWUpICYmICghbWF0ZXJpYWxEYXRhLnN0YXJ0RGF0ZSB8fCAhbWF0ZXJpYWxEYXRhLnN0YXJ0VGltZSkpIHtcclxuICAgICAgICAgIHRvYXN0LmVycm9yKGBQbGVhc2UgY29tcGxldGUgYm90aCBkYXRlIGFuZCB0aW1lIGZvciAke01BVEVSSUFMX0RJU1BMQVlfTkFNRVNbbWF0ZXJpYWxUeXBlXX0gLSAke3N1YnN0YWdlLm5hbWV9IHN0YXJ0YCk7XHJcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgobWF0ZXJpYWxEYXRhLmVuZERhdGUgfHwgbWF0ZXJpYWxEYXRhLmVuZFRpbWUpICYmICghbWF0ZXJpYWxEYXRhLmVuZERhdGUgfHwgIW1hdGVyaWFsRGF0YS5lbmRUaW1lKSkge1xyXG4gICAgICAgICAgdG9hc3QuZXJyb3IoYFBsZWFzZSBjb21wbGV0ZSBib3RoIGRhdGUgYW5kIHRpbWUgZm9yICR7TUFURVJJQUxfRElTUExBWV9OQU1FU1ttYXRlcmlhbFR5cGVdfSAtICR7c3Vic3RhZ2UubmFtZX0gZW5kYCk7XHJcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBpZiAoIXZhbGlkYXRlU3RhZ2VTZXF1ZW5jaW5nKGJhdGNoLmNvbWJpbmVkRGF0YSwgbWF0ZXJpYWxUeXBlLCB0b2FzdCkpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGhhbmRsZVNhdmUgPSBhc3luYyAoKSA9PiB7XHJcbiAgICBpZiAoIWN1cnJlbnRCYXRjaCB8fCBpc1NhdmluZ1JlZi5jdXJyZW50KSByZXR1cm47XHJcbiAgICBcclxuICAgIGNvbnNvbGUubG9nKCdcXG49PT09PT09PT09IPCfmoAgU0FWRSBTVEFSVEVEID09PT09PT09PT0nKTtcclxuICAgIGNvbnNvbGUubG9nKGBCYXRjaDogJHtjdXJyZW50QmF0Y2guYmF0Y2hOdW1iZXJ9IChJRDogJHtjdXJyZW50QmF0Y2guaWR9KWApO1xyXG4gICAgY29uc29sZS5sb2coYFRvdGFsIG1hdGVyaWFsczogJHtjdXJyZW50QmF0Y2gubWF0ZXJpYWxzLmxlbmd0aH1gKTtcclxuXHJcbiAgICBpc1NhdmluZ1JlZi5jdXJyZW50ID0gdHJ1ZTtcclxuICAgIHNldExvYWRpbmcodHJ1ZSk7XHJcbiAgICBcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHJlc3VsdHMgPSBbXTtcclxuICAgICAgbGV0IGhhc0FueURhdGFUb1NhdmUgPSBmYWxzZTtcclxuICAgICAgbGV0IHN1Y2Nlc3NDb3VudCA9IDA7XHJcbiAgICAgIGxldCBmYWlsQ291bnQgPSAwO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgbWF0ZXJpYWxUeXBlcyA9IGN1cnJlbnRCYXRjaC5tYXRlcmlhbHMubWFwKG0gPT4gTUFURVJJQUxfVFlQRVNbbV0pO1xyXG4gICAgICBcclxuICAgICAgZm9yIChjb25zdCBtYXRlcmlhbFR5cGUgb2YgbWF0ZXJpYWxUeXBlcykge1xyXG4gICAgICAgIGNvbnN0IGRpc3BsYXlOYW1lID0gTUFURVJJQUxfRElTUExBWV9OQU1FU1ttYXRlcmlhbFR5cGVdO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGBcXG4tLS0g8J+TnSBQcm9jZXNzaW5nIG1hdGVyaWFsOiAke2Rpc3BsYXlOYW1lfSAtLS1gKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBDaGVjayBpZiBtYXRlcmlhbCBoYXMgY29tcGxldGUgZGF0YVxyXG4gICAgICAgIGlmIChoYXNDb21wbGV0ZU1hdGVyaWFsRGF0YShjdXJyZW50QmF0Y2guY29tYmluZWREYXRhLCBtYXRlcmlhbFR5cGUpKSB7XHJcbiAgICAgICAgICBjb25zdCBwYXlsb2FkID0gY29udmVydFRvQXBpUGF5bG9hZChjdXJyZW50QmF0Y2gsIG1hdGVyaWFsVHlwZSwgZmFsc2UpO1xyXG4gICAgICAgICAgaWYgKHBheWxvYWQpIHtcclxuICAgICAgICAgICAgaGFzQW55RGF0YVRvU2F2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGDwn5OkIE1ha2luZyBBUEkgY2FsbCBmb3IgJHtkaXNwbGF5TmFtZX1gKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlbmRUb0FwaShwYXlsb2FkLCBtYXRlcmlhbFR5cGUsIGRpc3BsYXlOYW1lKTtcclxuICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHJlc3VsdCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICBzdWNjZXNzQ291bnQrKztcclxuICAgICAgICAgICAgICB0b2FzdC5zdWNjZXNzKGAke2Rpc3BsYXlOYW1lfSBkYXRhIHNhdmVkIHN1Y2Nlc3NmdWxseSFgKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBmYWlsQ291bnQrKztcclxuICAgICAgICAgICAgICB0b2FzdC5lcnJvcihgRmFpbGVkIHRvIHNhdmUgJHtkaXNwbGF5TmFtZX0gZGF0YTogJHtyZXN1bHQuZXJyb3J9YCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coYOKPre+4jyAke2Rpc3BsYXlOYW1lfSBoYXMgaW5jb21wbGV0ZSBkYXRhLCBza2lwcGluZ2ApO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc29sZS5sb2coJ1xcbj09PT09PT09PT0g8J+TiiBTQVZFIFNVTU1BUlkgPT09PT09PT09PScpO1xyXG4gICAgICBjb25zb2xlLmxvZyhgVG90YWwgQVBJIGNhbGxzIGF0dGVtcHRlZDogJHtyZXN1bHRzLmxlbmd0aH1gKTtcclxuICAgICAgY29uc29sZS5sb2coYOKchSBTdWNjZXNzZnVsOiAke3N1Y2Nlc3NDb3VudH1gKTtcclxuICAgICAgY29uc29sZS5sb2coYOKdjCBGYWlsZWQ6ICR7ZmFpbENvdW50fWApO1xyXG4gICAgICBjb25zb2xlLmxvZygnPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxcbicpO1xyXG5cclxuICAgICAgaWYgKCFoYXNBbnlEYXRhVG9TYXZlKSB7XHJcbiAgICAgICAgdG9hc3QuaW5mbygnTm8gY29tcGxldGUgZGF0YSB0byBzYXZlLiBQbGVhc2UgZmlsbCBpbiBhbGwgcmVxdWlyZWQgZmllbGRzIGZvciBhdCBsZWFzdCBvbmUgbWF0ZXJpYWwuJyk7XHJcbiAgICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XHJcbiAgICAgICAgaXNTYXZpbmdSZWYuY3VycmVudCA9IGZhbHNlO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgZXhpc3RpbmdJbmRleCA9IHNhdmVkQmF0Y2hlcy5maW5kSW5kZXgoYiA9PiBiLmlkID09PSBjdXJyZW50QmF0Y2guaWQpO1xyXG4gICAgICBcclxuICAgICAgaWYgKGV4aXN0aW5nSW5kZXggPj0gMCkge1xyXG4gICAgICAgIGNvbnN0IHVwZGF0ZWQgPSBbLi4uc2F2ZWRCYXRjaGVzXTtcclxuICAgICAgICB1cGRhdGVkW2V4aXN0aW5nSW5kZXhdID0geyAuLi5jdXJyZW50QmF0Y2gsIHN0YXR1czogJ2RyYWZ0JyB9O1xyXG4gICAgICAgIHNldFNhdmVkQmF0Y2hlcyh1cGRhdGVkKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBzZXRTYXZlZEJhdGNoZXMoWy4uLnNhdmVkQmF0Y2hlcywgeyAuLi5jdXJyZW50QmF0Y2gsIHN0YXR1czogJ2RyYWZ0JyB9XSk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGFsbFN1Y2Nlc3MgPSByZXN1bHRzLmV2ZXJ5KHIgPT4gci5zdWNjZXNzKTtcclxuICAgICAgaWYgKGFsbFN1Y2Nlc3MpIHtcclxuICAgICAgICB0b2FzdC5zdWNjZXNzKGBBbGwgJHtzdWNjZXNzQ291bnR9IG1hdGVyaWFsIGRhdGEgc2F2ZWQgc3VjY2Vzc2Z1bGx5IWApO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRvYXN0Lndhcm5pbmcoYCR7c3VjY2Vzc0NvdW50fSBtYXRlcmlhbChzKSBzYXZlZCBzdWNjZXNzZnVsbHksICR7ZmFpbENvdW50fSBmYWlsZWRgKTtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgdG9hc3QuZXJyb3IoJ0ZhaWxlZCB0byBzYXZlIGJhdGNoIGRhdGEnKTtcclxuICAgICAgY29uc29sZS5lcnJvcign4p2MIFNhdmUgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgfSBmaW5hbGx5IHtcclxuICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XHJcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIGlzU2F2aW5nUmVmLmN1cnJlbnQgPSBmYWxzZTtcclxuICAgICAgfSwgMTAwMCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgaGFuZGxlQmFja1RvU2VsZWN0aW9uID0gKCkgPT4ge1xyXG4gICAgLy8gQ2xlYXIgdGhlIGN1cnJlbnQgYmF0Y2ggdG8gc2hvdyB0aGUgc2VsZWN0aW9uIFVJXHJcbiAgICBzZXRDdXJyZW50QmF0Y2gobnVsbCk7XHJcbiAgICAvLyBDbGVhciBVUkwgcGFyYW1zIHdoZW4gZ29pbmcgYmFja1xyXG4gICAgcm91dGVyLnB1c2goJy9idW5rZXItbWFuYWdlbWVudCcpO1xyXG4gICAgLy8gQ2xlYXIgYW55IHNhdmVkIHN0YXRlXHJcbiAgICBzZXRFcnJvcihudWxsKTtcclxuICAgIC8vIFJlc2V0IHRoZSBpbml0aWFsIGJhdGNoIG51bWJlciBzdGF0ZSBpZiBuZWVkZWRcclxuICAgIHNldEluaXRpYWxCYXRjaE51bWJlcihudWxsKTtcclxuICAgIHNldEluaXRpYWxCYXRjaElkKG51bGwpO1xyXG4gIH07XHJcblxyXG4gIGlmICghY3VycmVudEJhdGNoKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8QXBwTGF5b3V0IHRpdGxlPVwiQnVua2VyIE1hbmFnZW1lbnRcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInVuaWZpZWQtcGxhdGZvcm0tY29udGFpbmVyXCI+XHJcbiAgICAgICAgICA8QmF0Y2hTZWxlY3Rpb24gXHJcbiAgICAgICAgICAgIG9uU2VsZWN0QmF0Y2g9e2hhbmRsZVNlbGVjdEJhdGNofVxyXG4gICAgICAgICAgICBsb2FkaW5nPXtsb2FkaW5nfVxyXG4gICAgICAgICAgICBlcnJvcj17ZXJyb3J9XHJcbiAgICAgICAgICAgIGluaXRpYWxCYXRjaE51bWJlcj17aW5pdGlhbEJhdGNoTnVtYmVyfVxyXG4gICAgICAgICAgICBpbml0aWFsQmF0Y2hJZD17aW5pdGlhbEJhdGNoSWR9XHJcbiAgICAgICAgICAvPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L0FwcExheW91dD5cclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBjb25zdCBtYXRlcmlhbE5hbWVzID0gY3VycmVudEJhdGNoLm1hdGVyaWFscy5tYXAobSA9PiBNQVRFUklBTF9ESVNQTEFZX05BTUVTW01BVEVSSUFMX1RZUEVTW21dXSkuam9pbignICsgJyk7XHJcblxyXG4gIHJldHVybiAoXHJcbiAgICA8QXBwTGF5b3V0IHRpdGxlPVwiQnVua2VyIE1hbmFnZW1lbnRcIj5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJ1bmlmaWVkLXBsYXRmb3JtLWNvbnRhaW5lclwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZW50cnktaGVhZGVyXCI+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhlYWRlci1sZWZ0XCI+XHJcbiAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17aGFuZGxlQmFja1RvU2VsZWN0aW9ufSBjbGFzc05hbWU9XCJiYWNrLWJ1dHRvblwiPlxyXG4gICAgICAgICAgICAgIDxBcnJvd0JhY2tJY29uLz5cclxuICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgIDxoMj57Y3VycmVudEJhdGNoLmJhdGNoTnVtYmVyfTwvaDI+XHJcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cIm1hdGVyaWFsLWNvdW50XCI+XHJcbiAgICAgICAgICAgICAgKHttYXRlcmlhbE5hbWVzfSlcclxuICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhlYWRlci1hY3Rpb25zXCI+XHJcbiAgICAgICAgICAgIDxidXR0b24gXHJcbiAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlU2F2ZX0gXHJcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnRuLXNhdmVcIlxyXG4gICAgICAgICAgICAgIGRpc2FibGVkPXtsb2FkaW5nfVxyXG4gICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgPFNhdmVJY29uIGZvbnRTaXplPVwic21hbGxcIiAvPlxyXG4gICAgICAgICAgICAgIHtsb2FkaW5nID8gJ1NhdmluZy4uLicgOiAnU2F2ZSd9XHJcbiAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgIDxDb21iaW5lZE1hdGVyaWFsVGFibGUgXHJcbiAgICAgICAgICBiYXRjaD17Y3VycmVudEJhdGNofVxyXG4gICAgICAgICAgb25VcGRhdGU9e2hhbmRsZVVwZGF0ZUJhdGNofVxyXG4gICAgICAgICAgcmVhZE9ubHk9e2ZhbHNlfVxyXG4gICAgICAgIC8+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9BcHBMYXlvdXQ+XHJcbiAgKTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQnVua2VyTWFuYWdlbWVudCgpIHtcclxuICByZXR1cm4gKFxyXG4gICAgPFRvYXN0UHJvdmlkZXI+XHJcbiAgICAgIDxCdW5rZXJNYW5hZ2VtZW50Q29udGVudCAvPlxyXG4gICAgPC9Ub2FzdFByb3ZpZGVyPlxyXG4gICk7XHJcbn0iXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VTdGF0ZSIsInVzZUVmZmVjdCIsInVzZVJlZiIsInVzZUNhbGxiYWNrIiwidXNlUm91dGVyIiwidXNlU2VhcmNoUGFyYW1zIiwiQXBwTGF5b3V0IiwiVG9hc3RQcm92aWRlciIsInVzZVRvYXN0IiwiU2F2ZUljb24iLCJBcnJvd0ZvcndhcmRJY29uIiwiQXJyb3dCYWNrSWNvbiIsIk1BVEVSSUFMX1RZUEVTIiwiTUFURVJJQUxfRElTUExBWV9OQU1FUyIsIkFQSV9CQVNFX1VSTCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19BUElfVVJMIiwiQVBJX0VORFBPSU5UIiwiQVBJX0ZFVENIX0VORFBPSU5UIiwiQkFUQ0hfRkVUQ0hfRU5EUE9JTlQiLCJTVEFHRV9OQU1FUyIsImNyZWF0ZUNvbWJpbmVkU3Vic3RhZ2UiLCJuYW1lIiwibWF0ZXJpYWxzIiwic3RhcnREYXRlIiwic3RhcnRUaW1lIiwiZW5kRGF0ZSIsImVuZFRpbWUiLCJ0b3RhbEhvdXJzIiwibW9pc3R1cmUiLCJ0ZW1wZXJhdHVyZSIsInJlbWFya3MiLCJyZWNvcmRJZCIsImNyZWF0ZUVtcHR5U3Vic3RhZ2UiLCJpbmNsdWRlTW9pc3R1cmUiLCJjcmVhdGVFbXB0eUJhdGNoIiwiYmF0Y2hOdW1iZXIiLCJiYXRjaElkIiwiYmF0Y2giLCJpZCIsIkRhdGUiLCJub3ciLCJiYXRjaERhdGEiLCJleGlzdGluZ1JlY29yZHMiLCJjb21iaW5lZERhdGEiLCJzdWJzdGFnZXMiLCJtYXAiLCJwYXJzZURhdGVUaW1lIiwiZGF0ZXRpbWUiLCJkYXRlIiwidGltZSIsImlzTmFOIiwiZ2V0VGltZSIsInllYXIiLCJnZXRGdWxsWWVhciIsIm1vbnRoIiwiU3RyaW5nIiwiZ2V0TW9udGgiLCJwYWRTdGFydCIsImRheSIsImdldERhdGUiLCJob3VycyIsImdldEhvdXJzIiwibWludXRlcyIsImdldE1pbnV0ZXMiLCJlcnJvciIsImNvbnNvbGUiLCJjYWxjdWxhdGVIb3VycyIsInN0YXJ0RGF0ZVRpbWUiLCJlbmREYXRlVGltZSIsInN0YXJ0IiwiZW5kIiwiZGlmZkhvdXJzIiwidG9GaXhlZCIsImZldGNoQmF0Y2hEYXRhIiwibG9nIiwicmVzcG9uc2UiLCJmZXRjaCIsIm9rIiwic3RhdHVzIiwic3VjY2VzcyIsImRhdGEiLCJFcnJvciIsInJlc3BvbnNlRGF0YSIsImpzb24iLCJpdGVtcyIsIkFycmF5IiwiaXNBcnJheSIsImJhdGNoX2lkIiwibWVzc2FnZSIsImZldGNoQmF0Y2hEZXRhaWxzIiwiY29tYmluZURhdGVUaW1lIiwiZGF0ZVRpbWVTdHIiLCJ0b0lTT1N0cmluZyIsImhhc1N1YnN0YWdlRGF0YSIsInN1YnN0YWdlRGF0YSIsInZhbGlkYXRlU3RhZ2VTZXF1ZW5jaW5nIiwibWF0ZXJpYWxUeXBlIiwidG9hc3QiLCJpIiwibGVuZ3RoIiwiY3VycmVudFN0YWdlIiwibmV4dFN0YWdlIiwiY3VycmVudEVuZCIsIm5leHRTdGFydCIsImhhc0NvbXBsZXRlTWF0ZXJpYWxEYXRhIiwiaGFzQW55RGF0YSIsInNvbWUiLCJzdWJzdGFnZSIsIm1hdGVyaWFsRGF0YSIsImNvbnZlcnRUb0FwaVBheWxvYWQiLCJpc0NvbXBsZXRlZCIsIm1hdGVyaWFsRGlzcGxheU5hbWUiLCJidW5rZXIxIiwiYnVua2VyMVJlc3QiLCJidW5rZXIyIiwiYnVua2VyMlJlc3QiLCJidW5rZXIzIiwiYnVua2VyM1Jlc3QiLCJmb3JtYXREYXRlVGltZSIsInNlY29uZHMiLCJnZXRTZWNvbmRzIiwiYnVua2VyMV9zdGFydCIsImJ1bmtlcjFfZW5kIiwiYnVua2VyMV9yZXN0X3N0YXJ0IiwiYnVua2VyMV9yZXN0X2VuZCIsImJ1bmtlcjJfc3RhcnQiLCJidW5rZXIyX2VuZCIsImJ1bmtlcjJfcmVzdF9zdGFydCIsImJ1bmtlcjJfcmVzdF9lbmQiLCJidW5rZXIzX3N0YXJ0IiwiYnVua2VyM19lbmQiLCJidW5rZXIzX3Jlc3Rfc3RhcnQiLCJidW5rZXIzX3Jlc3RfZW5kIiwiYWxsU3RhcnRzIiwiZmlsdGVyIiwib3ZlcmFsbF9zdGFydF90aW1lIiwiTWF0aCIsIm1pbiIsImQiLCJwYXlsb2FkIiwic3RyYXdfdHlwZSIsInN0YXJ0X3RpbWUiLCJpc2NvbXBsZXRlZCIsImJ1bmtlcl9wcm9jZXNzMSIsImVuZF90aW1lIiwicGFyc2VJbnQiLCJidW5rZXJfcHJvY2VzczFfcmVzdCIsImJ1bmtlcl9wcm9jZXNzMiIsImJ1bmtlcl9wcm9jZXNzMl9yZXN0IiwiYnVua2VyX3Byb2Nlc3MzIiwiYnVua2VyX3Byb2Nlc3MzX3Jlc3QiLCJPYmplY3QiLCJrZXlzIiwiZm9yRWFjaCIsImtleSIsInN1YktleSIsInVuZGVmaW5lZCIsImNvbnZlcnRBcGlSZXNwb25zZVRvVUkiLCJhcGlEYXRhIiwic3Vic3RhZ2VNYXBwaW5ncyIsImluZGV4IiwiZmllbGQiLCJzdGFnZURhdGEiLCJ0YXJnZXRTdWJzdGFnZSIsImR1cmF0aW9uX2hvdXJzIiwidG9TdHJpbmciLCJzZW5kVG9BcGkiLCJkaXNwbGF5TmFtZSIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImVycm9yRGF0YSIsImNhdGNoIiwiZGV0YWlsIiwiZXJyb3JNZXNzYWdlIiwiZXJyIiwibXNnIiwiam9pbiIsInJlc3VsdCIsIkNvbWJpbmVkTWF0ZXJpYWxUYWJsZSIsIm1lbW8iLCJvblVwZGF0ZSIsInJlYWRPbmx5IiwicHJlc2VudE1hdGVyaWFsVHlwZXMiLCJtIiwiQm9vbGVhbiIsImdldEhlYWRlck1hdGVyaWFscyIsInR5cGUiLCJ2YWxpZGF0ZURhdGVSYW5nZSIsIm5ld1ZhbHVlIiwibmV3U3RhcnREYXRlVGltZSIsIm5ld0VuZERhdGVUaW1lIiwidmFsaWRhdGVTdGFnZVNlcXVlbmNlIiwic3Vic3RhZ2VJbmRleCIsInZhbHVlIiwidXBkYXRlZEJhdGNoIiwidGVtcE1hdGVyaWFsRGF0YSIsInByZXZTdGFnZSIsInByZXZFbmQiLCJjdXJyZW50U3RhcnQiLCJnZXRNaW5FbmREYXRlIiwiZ2V0TWluRW5kVGltZSIsImhhbmRsZUlucHV0Q2hhbmdlIiwicGFyc2UiLCJoZWFkZXJNYXRlcmlhbHMiLCJtYXRlcmlhbENvdW50IiwiZGl2IiwiY2xhc3NOYW1lIiwiaDMiLCJ0YWJsZSIsInRoZWFkIiwidHIiLCJ0aCIsInJvd1NwYW4iLCJGcmFnbWVudCIsImNvbFNwYW4iLCJ0Ym9keSIsInRkIiwiaW5wdXQiLCJvbkNoYW5nZSIsImUiLCJ0YXJnZXQiLCJkaXNhYmxlZCIsIm1heCIsInBsYWNlaG9sZGVyIiwic3RlcCIsIkJhdGNoU2VsZWN0aW9uIiwib25TZWxlY3RCYXRjaCIsImxvYWRpbmciLCJpbml0aWFsQmF0Y2hOdW1iZXIiLCJpbml0aWFsQmF0Y2hJZCIsInNldEJhdGNoTnVtYmVyIiwiaXNMb2FkaW5nIiwic2V0SXNMb2FkaW5nIiwicm91dGVyIiwic2VhcmNoUGFyYW1zIiwiaGFzTG9hZGVkUmVmIiwiY3VycmVudCIsImhhbmRsZUxvYWRCYXRjaCIsImdldE1hdGVyaWFsc0Zyb21CYXRjaCIsIlNldCIsImZvcm11bGF0aW9uX2VudHJpZXMiLCJlbnRyeSIsIm1hdGVyaWFsTmFtZSIsInRvVXBwZXJDYXNlIiwiYWRkIiwiZnJvbSIsImJhdGNoTnVtIiwidHJpbSIsInNlbGVjdGVkQmF0Y2giLCJiYXRjaElkVG9Vc2UiLCJiYXRjaFJlc3BvbnNlIiwiYmF0Y2hSZXN1bHQiLCJhbGxCYXRjaGVzUmVzcG9uc2UiLCJhbGxCYXRjaGVzUmVzdWx0IiwiYmF0Y2hlcyIsImZpbmQiLCJiIiwiYmF0Y2hfbnVtYmVyIiwibmV3QmF0Y2giLCJzdHJhd0RhdGFSZXN1bHQiLCJwb3B1bGF0ZWRCYXRjaCIsIndhcm5pbmciLCJoYW5kbGVDcmVhdGVOZXciLCJoYW5kbGVCYWNrQ2xpY2siLCJwdXNoIiwiaDIiLCJidXR0b24iLCJvbkNsaWNrIiwiQnVua2VyTWFuYWdlbWVudENvbnRlbnQiLCJjdXJyZW50QmF0Y2giLCJzZXRDdXJyZW50QmF0Y2giLCJzYXZlZEJhdGNoZXMiLCJzZXRTYXZlZEJhdGNoZXMiLCJzZXRMb2FkaW5nIiwic2V0RXJyb3IiLCJzZXRJbml0aWFsQmF0Y2hOdW1iZXIiLCJzZXRJbml0aWFsQmF0Y2hJZCIsImlzU2F2aW5nUmVmIiwiZ2V0IiwiaGFuZGxlU2VsZWN0QmF0Y2giLCJoYW5kbGVVcGRhdGVCYXRjaCIsInZhbGlkYXRlQmF0Y2hEYXRhIiwibWF0ZXJpYWxUeXBlcyIsImhhbmRsZVNhdmUiLCJyZXN1bHRzIiwiaGFzQW55RGF0YVRvU2F2ZSIsInN1Y2Nlc3NDb3VudCIsImZhaWxDb3VudCIsImluZm8iLCJleGlzdGluZ0luZGV4IiwiZmluZEluZGV4IiwidXBkYXRlZCIsImFsbFN1Y2Nlc3MiLCJldmVyeSIsInIiLCJzZXRUaW1lb3V0IiwiaGFuZGxlQmFja1RvU2VsZWN0aW9uIiwidGl0bGUiLCJtYXRlcmlhbE5hbWVzIiwic3BhbiIsImZvbnRTaXplIiwiQnVua2VyTWFuYWdlbWVudCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./app/(pages)/bunker-management/page.jsx\n"));

/***/ })

});